{"version":3,"sources":["icons/explore.svg","icons/collection.svg","icons/dataClinicWhite.svg","hooks/useLunr.js","utils/socrata.js","contexts/OpenDataContext.jsx","hooks/datasets.js","contexts/CollectionsContext.jsx","hooks/collections.js","components/CollectionTab/CollectionTab.jsx","components/SideNav/SideNav.jsx","components/RawHTML/RawHTML.jsx","utils/formatters.jsx","icons/joinable.svg","icons/thematicSimilarity.svg","components/ViewOnOpenPortal/ViewOnOpenPortal.jsx","components/Dataset/Dataset.jsx","components/SortMenu/SortMenu.jsx","components/Loading/DatasetsLoading/DatasetsLoading.jsx","hooks/pagination.jsx","hooks/analytics.js","components/Loading/FilterLoading/FilterLoading.jsx","components/MultiSelector/MultiSelector.jsx","contexts/SearchContext.jsx","layout/HomePage/HomePage.jsx","hooks/search.js","components/JoinColumn/JoinColumn.jsx","components/ColumnSuggestions/ColumnSuggestions.jsx","components/ColumnMatchTable/ColumnMatchTable.jsx","components/Breadcrumb/Breadcrumb.jsx","layout/DatasetPage/DatasetPage.jsx","hooks/useClipboard.js","layout/CollectionPage/CollectionPage.jsx","layout/AboutPage/AboutPage.jsx","components/CollectionCard/CollectionCard.jsx","layout/CollectionsPage/CollectionsPage.jsx","components/CreateCollectionModal/CreateCollectionModal.jsx","components/WelcomeModal/WelcomeModal.jsx","hooks/useSeenWelcome.js","components/GHPagesRedirect/GHPagesRedirect.jsx","App.jsx","serviceWorker.js","index.jsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref","svgRef","title","props","focusable","preserveAspectRatio","style","willChange","width","height","viewBox","ref","ForwardRef","forwardRef","fill","fillRule","transform","parameterisedPlugin","builder","fields","forEach","field","generateIndex","options","documents","lunr","use","doc","add","storeIndex","index","docLength","localStorage","setItem","JSON","stringify","docCount","cachedIndex","SOCRATA_NY_OPENDATA_ENDPOINT","getMaifestPage","pageNo","a","async","limit","fetch","then","r","json","matachableColumnsForDataset","dataset","Set","resource","columns_name","map","s","toLocaleLowerCase","columns_field_name","hasJoinableMatch","columns","candidate","candidateCols","intersection","filter","x","has","Array","from","getUniqueEntries","column","id","replace","errorCode","error","console","warn","entry","values","db","Dexie","version","stores","SocrataCache","AppContext","createContext","initalState","datasets","tagList","categories","departments","stateLoaded","lastUpdated","reducer","state","action","type","payload","updateManifestFromSocrata","dispatch","firstPage","totalEntries","resultSetSize","pages","Math","ceil","Promise","all","_","resp","results","list","reduce","datasetPage","allDatasets","getManifest","manifest","classification","domain_tags","tag","getTagList","cats","totals","cat","domain_metadata","find","md","value","department","getDepartments","columnList","col","getColumns","Date","useStateValue","useContext","useStateLoaded","useJoinableDatasets","useMemo","cols","joinableColumns","match","findJoinable","useGetSimilarDatasets","datasetID","useState","similarityMetrics","setSimilarityMetrics","useEffect","process","similarity","useDataset","useGetDatasetsByIds","ids","includes","useDatasets","tags","term","query","useRef","setResults","cachedIndexStr","getItem","parse","current","Index","load","search","log","useLunr","name","description","searchedDatasets","resultDatasets","item","matches","CollectionsContext","collections","activeCollectionID","CollectionCache","c","createdAt","useCollectionsValue","useCurrentCollection","pendingCollection","clearCollection","collectionID","addToCollection","removeFromCollection","setName","createCollectionFromPending","uuidv4","useCollections","deleteCollection","setActiveCollection","CollectionTab","visible","onDismiss","collection","currentCollectionDatasets","newCollectionName","setNewCollectionName","tab","setTab","getAgency","className","placeholder","onChange","e","onClick","to","SideNav","showCollectionTab","setShowCollectionTab","alt","activeClassName","exact","position","RawHTML","html","cleanedHTML","DOMPurify","sanitize","dangerouslySetInnerHTML","__html","formatDate","date","toLocaleDateString","year","month","day","hilightMatches","text","regex","RegExp","constructCollectionLink","join","y","maskContentUnits","maskUnits","xlinkHref","_ref3","stroke","strokeDasharray","strokeWidth","mask","permalink","rel","href","icon","faExternalLinkAlt","Dataset","onAddToCollection","onRemoveFromCollection","inCollection","viewInOpenPortal","formattedName","similarDatasets","joinNumber","joinNumbers","setJoinNumbers","useGetJoinNumbers","formattedDescription","attribution","toPrecision","ViewOnOpenPortal","max","updatedAt","SortMenu","selected","direction","onSelected","onDirection","expanded","setExpanded","o","option","faSortUp","faSortDown","usePagination","data","perPage","currentPageNo","setCurrentPageNo","pageButtons","previousLabel","nextLabel","breakLabel","breakClassName","pageCount","onPageChange","page","containerClassName","subContainerClassName","previousClassName","nextClassName","pageClassName","content","slice","usePageView","params","pageView","window","location","pathname","fathom","path","disabled","MultiSelector","items","collapse","onCollapse","collapsed","setCollapsed","collapsedActual","loaded","searchTerm","setSearchTerm","itemNames","useFuse","shouldSort","findAllMatches","caseSensitive","filteredItems","result","usePagenation","sort","b","pagedItems","newSelection","toggleItem","checked","SearchContext","sortVariable","sortOrder","collapseFilters","collapsedFilterList","t","category","useSearchState","HomePage","useCategories","useTags","useDepartments","useColumns","newTags","useSelectedTags","selectedTags","setSelectedTags","newColumns","useSelectedColumns","selectedColumns","setSelectedColumns","newCategories","useSelectedCategories","selectedCategories","setSelectedCategories","newDepartments","useSelectedDepartments","selectedDepartments","setSelectedDepartments","newTerm","useSearchTerm","newSortVariable","useSortVariable","sortBy","setSortBy","newSortOrder","useSortOrder","sortDirection","setSortDirection","useFilterBarState","collapseFilterBar","setCollapseFilterBar","useFilterUIStates","filterStates","setFilterState","asc","valA","valB","download_count","page_views","page_views_total","useSortDatasetsBy","pagedDatasets","onKeyDown","faAngleDown","faAngleLeft","size","faSearch","debounceTimeout","ColumnJoin","rightDataset","keycode","role","tabIndex","faAngleRight","faFile","floor","leftSize","toLocaleString","uid","faTable","min","ColumnSuggestions","joins","overlaps","setOverlaps","dataTypeForCol","columns_datatype","j","pagedJoins","parentUniques","res","perviousOverlaps","catch","keyCode","leftDataset","joinCol","ColumnMatchTable","joinColumns","suggestionsForColumn","useCallback","candidates","toLowerCase","sortedColumns","Breadcrumb","currentPage","moment","format","DatasetPage","parentDataset","parent_fxf","activeTab","setActiveTab","pageViews","domainMetadata","mostSimilarDatasets","suggestion","updatedAutomation","updateFrequency","informationAgency","src","owner","display_name","domain_category","metadata_updated_at","currentDataset","parentData","renderNotFound","copyToClipboard","navigator","clipboard","writeText","document","queryCommandSupported","textarea","opacity","textContent","body","appendChild","select","execCommand","removeChild","CollectionPage","datasetIDs","url","split","isCopied","setIsCopied","useClipboard","setCopied","FacebookShareButton","FacebookIcon","TwitterShareButton","TwitterIcon","EmailShareButton","EmailIcon","AboutPage","faGithub","faMedium","faTwitter","CollectionCard","CollectionsPage","nonPendingCollections","faLayerGroup","CreateCollectionModal","WelcomeModal","seenWelcome","setSeenWelcome","setLoaded","useSeenWelcome","onBackdropClick","GHPagesRedirect","redirect","setRedirect","sessionStorage","App","basename","component","parentPath","Boolean","hostname","ReactDOM","render","children","useReducer","get","cachedState","shouldUpdateCache","cache_loaded","put","Provider","cacheLoaded","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9545f6ca.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M26,22a3.86,3.86,0,0,0-2,.57l-3.09-3.1a6,6,0,0,0,0-6.94L24,9.43A3.86,3.86,0,0,0,26,10a4,4,0,1,0-4-4,3.86,3.86,0,0,0,.57,2l-3.1,3.09a6,6,0,0,0-6.94,0L9.43,8A3.86,3.86,0,0,0,10,6a4,4,0,1,0-4,4,3.86,3.86,0,0,0,2-.57l3.09,3.1a6,6,0,0,0,0,6.94L8,22.57A3.86,3.86,0,0,0,6,22a4,4,0,1,0,4,4,3.86,3.86,0,0,0-.57-2l3.1-3.09a6,6,0,0,0,6.94,0L22.57,24A3.86,3.86,0,0,0,22,26a4,4,0,1,0,4-4ZM16,20a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z\"\n});\n\nvar SvgExplore = function SvgExplore(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    focusable: \"false\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    style: {\n      willChange: \"transform\"\n    },\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 32 32\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgExplore, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/explore.fb15de02.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M26 6v4H6V6H26m0-2H6A2 2 0 0 0 4 6v4a2 2 0 0 0 2 2H26a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zM10 16V26H6V16h4m0-2H6a2 2 0 0 0-2 2V26a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM26 16V26H16V16H26m0-2H16a2 2 0 0 0-2 2V26a2 2 0 0 0 2 2H26a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2z\"\n});\n\nvar SvgCollection = function SvgCollection(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    focusable: \"false\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    style: {\n      willChange: \"transform\"\n    },\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 32 32\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCollection, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/collection.1a7a2605.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  d: \"M61.8297361,383.0173 C64.003338,384.980686 65.6503671,389.264692 64.9958636,393.681256 C63.9028059,401.057166 56.8413572,406.042444 49.2586679,404.731167 C46.4025566,404.237083 42.3627381,401.908323 40.3460271,398.57871 C38.5309871,395.582059 38.3605131,393.546432 38.3445334,391.68581 L38.3445334,391.68581 L38.3428849,391.071007 L49.9160871,391.066082 C52.9183041,390.974798 55.7552526,389.639352 56.8413572,388.95355 C58.9628323,387.613981 61.1695602,384.517339 61.8297361,383.0173 Z M31.4640829,352.26879 C40.4585147,350.682829 49.0585805,356.270862 51.3939881,364.922464 L51.3939881,364.922464 L36.4663353,364.922464 L36.4663353,386.893019 C27.3490294,387.931132 18.8837548,381.700688 17.2687903,372.541769 C15.5904836,363.023619 21.9459326,353.947097 31.4640829,352.26879 Z M60.385413,364.235185 C62.4852808,364.235185 64.601753,365.299916 66.011064,366.866044 C67.3969088,368.406096 68.1714653,370.474554 68.1714653,372.208809 C68.1714653,374.253167 67.391756,375.700926 66.7289589,376.652666 C66.1118397,377.538814 64.6051395,379.243661 62.7796187,379.818356 C62.7796187,377.490068 63.2010054,374.997718 61.0380823,371.124996 C59.7411451,368.802826 56.9653724,366.912254 55.7593284,366.159617 L55.7593284,366.159617 L55.280758,365.8693 C56.4250547,365.026901 57.8483036,364.235185 60.385413,364.235185 Z\",\n  transform: \"translate(-17 -352)\"\n});\n\nvar SvgDataClinicWhite = function SvgDataClinicWhite(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 52,\n    height: 53,\n    viewBox: \"0 0 52 53\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDataClinicWhite, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dataClinicWhite.15f75b4c.svg\";\nexport { ForwardRef as ReactComponent };","import { useState, useRef, useEffect } from 'react';\nimport lunr from 'lunr';\n\nconst parameterisedPlugin = function(builder, fields) {\n  fields.forEach(function(field) {\n    builder.field(field);\n  });\n};\nfunction generateIndex(options, documents) {\n  return lunr(function() {\n    this.use(parameterisedPlugin, options.fields);\n\n    documents.forEach(function(doc) {\n      this.add(doc);\n    }, this);\n  });\n}\n\nfunction storeIndex(index, docLength) {\n  return localStorage.setItem(\n    'searchIndex',\n    JSON.stringify({ docCount: docLength, cachedIndex: index }),\n  );\n}\n\nexport default function useLunr({ query, documents, options }) {\n  const index = useRef(null);\n  const [results, setResults] = useState([]);\n\n  useEffect(() => {\n    const cachedIndexStr = localStorage.getItem('searchIndex');\n    if (cachedIndexStr) {\n      const { docCount, cachedIndex } = JSON.parse(cachedIndexStr);\n      if (docCount === documents.length || documents.length === 0) {\n        index.current = lunr.Index.load(cachedIndex);\n      } else {\n        index.current = generateIndex(options, documents);\n        storeIndex(index.current, documents.length);\n      }\n    } else {\n      index.current = generateIndex(options, documents);\n      storeIndex(index.current, documents.length);\n    }\n  }, [documents, options]);\n\n  useEffect(() => {\n    if (index.current) {\n      try {\n        setResults(index.current.search(query));\n      } catch {\n        console.log('ignoring bad query format');\n      }\n    }\n  }, [query]);\n  return results;\n}\n","const SOCRATA_NY_OPENDATA_ENDPOINT =\n  'https://api.us.socrata.com/api/catalog/v1?domains=data.cityofnewyork.us&search_context=data.cityofnewyork.us';\n\nasync function getMaifestPage(pageNo, limit = 100) {\n  return fetch(\n    `${SOCRATA_NY_OPENDATA_ENDPOINT}&offset=${pageNo * limit}&limit=${limit}`,\n  ).then((r) => r.json());\n}\n\nfunction matachableColumnsForDataset(dataset) {\n  return new Set([\n    ...dataset.resource.columns_name.map((s) => s.toLocaleLowerCase()),\n    ...dataset.resource.columns_field_name.map((s) => s.toLocaleLowerCase()),\n  ]);\n}\n\nfunction hasJoinableMatch(columns, candidate) {\n  const candidateCols = matachableColumnsForDataset(candidate);\n  const intersection = new Set(\n    [...columns].filter(\n      (x) => candidateCols.has(x), // && ALLOWED_JOIN_COLUMNS.includes(x),\n    ),\n  );\n  return Array.from(intersection);\n}\n\nexport function findJoinable(dataset, datasets) {\n  const cols = matachableColumnsForDataset(dataset);\n  const matches = datasets\n    .map((candidate) => ({\n      dataset: candidate,\n      joinableColumns: hasJoinableMatch(cols, candidate),\n    }))\n    .filter(\n      (match) =>\n        match.joinableColumns.length > 0 &&\n        match.dataset.resource.id !== dataset.resource.id,\n    );\n  return matches;\n}\n\n/**\n * Get the full manifest from Socrata. This should be cached locally and updated in a smart way.\n *\n * @return {Promise(Array)} a promise that resolves to an array of the datasets\n */\nexport async function getManifest() {\n  const firstPage = await getMaifestPage(0, 1);\n  const totalEntries = firstPage.resultSetSize;\n  const pages = Math.ceil(totalEntries / 100);\n  return Promise.all(\n    [...Array(pages)].map((_, i) =>\n      getMaifestPage(i).then((resp) => resp.results),\n    ),\n  ).then((list) => {\n    return list.reduce(\n      (datasetPage, allDatasets) => [...allDatasets, ...datasetPage],\n      [],\n    );\n  });\n}\n\n/**\n * Extract from the datasets array, a unique set of columns.\n * @return {Array<string>} an array of unique categories\n */\nexport function getColumns(datasets) {\n  const columnList = {};\n\n  datasets.forEach((dataset) => {\n    if (dataset.resource.columns_name) {\n      dataset.resource.columns_name.forEach((col) => {\n        if (col in columnList) {\n          columnList[col] += 1;\n        } else {\n          columnList[col] = 1;\n        }\n      });\n    }\n  });\n  return columnList;\n}\n\n/**\n * Extract from the datasets array, a unique set of categories.\n * @return {Array<string>} an array of unique categories\n */\nexport function getCategories(datasets) {\n  const categories = datasets.reduce(\n    (cats, dataset) => [\n      ...cats,\n      ...(dataset.classification.categories\n        ? dataset.classification.categories\n        : []),\n    ],\n    [],\n  );\n\n  const counts = categories.reduce(\n    (totals, cat) =>\n      cat in totals\n        ? { ...totals, [cat]: totals[cat] + 1 }\n        : { ...totals, [cat]: 1 },\n    {},\n  );\n  return counts;\n}\n\n/**\n * Extract from the datasets array, a unique set of categories.\n * @return {Array<string>} an array of unique categories\n */\nexport function getDepartments(datasets) {\n  const departments = datasets\n    .map((dataset) =>\n      dataset.classification.domain_metadata.find(\n        (md) => md.key === 'Dataset-Information_Agency',\n      ),\n    )\n    .filter((d) => d)\n    .map((d) => d.value);\n  const counts = departments.reduce(\n    (totals, department) =>\n      department in totals\n        ? { ...totals, [department]: totals[department] + 1 }\n        : { ...totals, [department]: 1 },\n    {},\n  );\n  return counts;\n}\n/**\n * Extract from the datasets array, a unique set of tags.\n * @return {Array<string>} an array of unique tags\n */\nexport function getTagList(datasets) {\n  const tagList = {};\n\n  datasets.forEach((dataset) => {\n    if (dataset.classification.domain_tags) {\n      dataset.classification.domain_tags.forEach((tag) => {\n        if (tag in tagList) {\n          tagList[tag] += 1;\n        } else {\n          tagList[tag] = 1;\n        }\n      });\n    }\n  });\n  return tagList;\n}\n\nexport function getUniqueEntriesCount(dataset, column) {\n  return fetch(\n    `https://data.cityofnewyork.us/resource/${\n      dataset.resource.id\n    }.json?$select=distinct|> select count(*) ${column.replace(/ /g, '_')}`,\n  ).then((r) => r.json());\n}\nexport function getUniqueEntries(dataset, column) {\n  return fetch(\n    `https://data.cityofnewyork.us/resource/${\n      dataset.resource.id\n    }.json?$select=distinct ${column.replace(/ /g, '_')}`,\n  )\n    .then((r) => r.json())\n    .then((r) => {\n      if (r.errorCode || r.error) {\n        console.warn(\n          'Failed to load unique entries for dataset ',\n          dataset,\n          ' column ',\n          column,\n        );\n        return [];\n      }\n      return r.map((entry) => Object.values(entry)[0]);\n    });\n}\n","import React, { createContext, useContext, useReducer, useEffect } from 'react';\n\nimport Dexie from 'dexie';\nimport {\n  getManifest,\n  getCategories,\n  getColumns,\n  getTagList,\n  getDepartments,\n} from '../utils/socrata';\n\nconst db = new Dexie('SocrataCache');\ndb.version(1).stores({\n  SocrataCache: 'id',\n});\n\nexport const AppContext = createContext();\n\nconst initalState = {\n  datasets: [],\n  tagList: [],\n  categories: [],\n  departments: [],\n  columns: [],\n  stateLoaded: false,\n  lastUpdated: null,\n};\n\nconst reducer = (state, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case 'UPDATE_OPEN_DATASET_MANIFEST':\n      return {\n        ...state,\n        datasets: payload.datasets,\n        lastUpdated: payload.lastUpdated,\n      };\n    case 'UPDATE_TAGS':\n      return { ...state, tagList: payload };\n    case 'UPDATE_CATEGORIES':\n      return { ...state, categories: payload };\n    case 'UPDATE_COLUMNS':\n      return { ...state, columns: payload };\n    case 'UPDATE_DEPARTMENTS':\n      return { ...state, departments: payload };\n    case 'HYDRATE_STATE':\n      return { ...state, ...payload };\n    case 'SET_LOADED':\n      return { ...state, stateLoaded: true };\n    default:\n      return state;\n  }\n};\n\nconst updateManifestFromSocrata = (dispatch) => {\n  getManifest().then((manifest) => {\n    const tagList = getTagList(manifest);\n    const categories = getCategories(manifest);\n    const departments = getDepartments(manifest);\n    const columns = getColumns(manifest);\n    dispatch({\n      type: 'UPDATE_OPEN_DATASET_MANIFEST',\n      payload: {\n        datasets: manifest,\n        lastUpdated: new Date(),\n      },\n    });\n    dispatch({\n      type: 'UPDATE_TAGS',\n      payload: tagList,\n    });\n    dispatch({\n      type: 'UPDATE_CATEGORIES',\n      payload: categories,\n    });\n    dispatch({\n      type: 'UPDATE_DEPARTMENTS',\n      payload: departments,\n    });\n    dispatch({\n      type: 'UPDATE_COLUMNS',\n      payload: columns,\n    });\n    dispatch({\n      type: 'SET_LOADED',\n    });\n  });\n};\n\n// Checks to see if the cache is older than 1 daym if so update it\nconst shouldUpdateCache = (lastUpdated) => {\n  if (lastUpdated == null) return true;\n  if ((new Date() - lastUpdated) / 1000 > 24 * 60 * 60) return true;\n  return false;\n};\n\nexport const StateProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initalState);\n\n  // Try to get the state locally from indexed db... if we can't find it there, request it from the\n  // socrata API\n  //\n  //\n  useEffect(() => {\n    console.log('state is ', state);\n  }, [state]);\n\n  useEffect(() => {\n    db.SocrataCache.get(1).then((result) => {\n      if (result) {\n        const cachedState = JSON.parse(result.data);\n\n        if (shouldUpdateCache(new Date(cachedState.lastUpdated))) {\n          updateManifestFromSocrata(dispatch);\n        } else {\n          dispatch({\n            type: 'HYDRATE_STATE',\n            payload: {\n              ...initalState,\n              ...cachedState,\n              cache_loaded: true,\n            },\n          });\n          // Set state as loaded to indicate that data is ready to use\n          dispatch({\n            type: 'SET_LOADED',\n          });\n        }\n      } else {\n        updateManifestFromSocrata(dispatch);\n      }\n    });\n  }, []);\n\n  // If our datasets change, update the cahced version\n  const {\n    datasets,\n    tagList,\n    columns,\n    categories,\n    departments,\n    stateLoaded,\n    lastUpdated,\n  } = state;\n  useEffect(() => {\n    if (stateLoaded) {\n      db.SocrataCache.put({\n        data: JSON.stringify({\n          datasets,\n          tagList,\n          categories,\n          departments,\n          columns,\n          lastUpdated,\n        }),\n        id: 1,\n      });\n    }\n  }, [\n    datasets,\n    tagList,\n    categories,\n    columns,\n    departments,\n    stateLoaded,\n    lastUpdated,\n  ]);\n\n  return (\n    <AppContext.Provider value={[state, dispatch]}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\nexport const useStateValue = () => useContext(AppContext);\n","import { useMemo, useState, useEffect } from 'react';\nimport useLunr from './useLunr';\nimport { useStateValue } from '../contexts/OpenDataContext';\nimport { findJoinable, getUniqueEntries } from '../utils/socrata';\n\nexport function useStateLoaded() {\n  const [{ stateLoaded }] = useStateValue();\n  return stateLoaded;\n}\n\nexport function useTags() {\n  const [{ tagList }] = useStateValue();\n  return tagList;\n}\n\nexport function useCategories() {\n  const [{ categories }] = useStateValue();\n  return categories;\n}\n\nexport function useDepartments() {\n  const [{ departments }] = useStateValue();\n  return departments;\n}\n\nexport function useColumns() {\n  const [{ columns }] = useStateValue();\n  return columns;\n}\n\nexport function useJoinableDatasets(dataset) {\n  const [{ datasets }] = useStateValue();\n  return useMemo(() => (dataset ? findJoinable(dataset, datasets) : []), [\n    dataset,\n    datasets,\n  ]);\n}\n\nexport function useGetJoinNumbers(datasetID) {\n  const [joinNumbers, setJoinNumbers] = useState({});\n  useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/potential_join_numbers.json`)\n      .then((r) => r.json())\n      .then((r) => setJoinNumbers(r));\n  }, []);\n  return datasetID in joinNumbers ? joinNumbers[datasetID] : 0;\n}\nexport function useGetSimilarDatasets(datasetID) {\n  const [similarityMetrics, setSimilarityMetrics] = useState({});\n  const [{ datasets }] = useStateValue();\n\n  useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/similarity_metrics.json`)\n      .then((r) => r.json())\n      .then((r) => setSimilarityMetrics(r));\n  }, []);\n\n  const similarDatasets = useMemo(\n    () =>\n      similarityMetrics[datasetID] && datasets && datasets.length > 0\n        ? similarityMetrics[datasetID].map((match) => ({\n            similarity: match.similarity,\n            dataset: datasets.find((d) => d.resource.id === match.dataset),\n          }))\n        : [],\n\n    [similarityMetrics, datasetID, datasets],\n  );\n  return similarDatasets;\n}\n\nexport function useDataset(datasetID) {\n  const [{ datasets }] = useStateValue();\n  return datasets.find((d) => d.resource.id === datasetID);\n}\n\nexport function useGetDatasetsByIds(ids) {\n  const [{ datasets }] = useStateValue();\n  return useMemo(() => datasets.filter((d) => ids.includes(d.resource.id)), [\n    datasets,\n    ids,\n  ]);\n}\n\nexport function useDatasets({ tags, term, categories, columns, departments }) {\n  const [{ datasets }] = useStateValue();\n  const results = useLunr({\n    query: term,\n    documents: datasets.map((d) => ({\n      id: d.resource.id,\n      name: d.resource.name,\n      description: d.resource.description,\n    })),\n    options: {\n      fields: ['name', 'description'],\n    },\n  });\n  console.log('search results', results);\n\n  const searchedDatasets = results.map((r) =>\n    datasets.find((d) => d.resource.id === r.ref),\n  );\n\n  return useMemo(() => {\n    if (searchedDatasets) {\n      let resultDatasets =\n        searchedDatasets[0] && searchedDatasets[0].item\n          ? searchedDatasets.map((match) => match.item)\n          : [...searchedDatasets];\n\n      const matches =\n        searchedDatasets && searchedDatasets[0] && searchedDatasets[0].item\n          ? searchedDatasets.map((d) => ({\n              id: d.item.resource.id,\n              matches: d.matches,\n            }))\n          : [];\n\n      if (tags && tags.length > 0) {\n        resultDatasets = resultDatasets.filter(\n          (dataset) =>\n            dataset.classification.domain_tags.filter((tag) =>\n              tags.includes(tag),\n            ).length > 0,\n        );\n      }\n\n      if (categories && categories.length > 0) {\n        resultDatasets = resultDatasets.filter(\n          (dataset) =>\n            dataset.classification.categories.filter((cat) =>\n              categories.includes(cat),\n            ).length > 0,\n        );\n      }\n\n      if (columns && columns.length > 0) {\n        resultDatasets = resultDatasets.filter(\n          (dataset) =>\n            dataset.resource.columns_name &&\n            dataset.resource.columns_name.filter((col) => columns.includes(col))\n              .length > 0,\n        );\n      }\n\n      if (departments && departments.length > 0) {\n        resultDatasets = resultDatasets.filter((dataset) =>\n          departments.includes(\n            dataset.classification.domain_metadata.find(\n              (d) => d.key === 'Dataset-Information_Agency',\n            )?.value,\n          ),\n        );\n      }\n\n      return {\n        datasets: resultDatasets,\n        matches: matches.filter((match) =>\n          resultDatasets.find((r) => r.resource.id === match.id),\n        ),\n      };\n    }\n    return datasets;\n  }, [searchedDatasets, tags, categories, columns, departments, datasets]);\n}\n\nexport function useSortDatasetsBy(\n  datasets,\n  type,\n  asc = false,\n  searchTerm = '',\n) {\n  return useMemo(() => {\n    // If we have a search term, do not sort the datasets\n    if (searchTerm) {\n      return datasets;\n    }\n    return datasets.sort((a, b) => {\n      let valA = null;\n      let valB = null;\n      switch (type) {\n        case 'Name':\n          valA = a.resource.name;\n          valB = b.resource.name;\n          break;\n        case 'Created At':\n          valA = a.resource.createdAt;\n          valB = b.resource.createdAt;\n          break;\n        case 'Updated At':\n          valA = a.resource.updatedAt;\n          valB = b.resource.updatedAt;\n          break;\n        case 'Downloads':\n          valA = a.resource.download_count;\n          valB = b.resource.download_count;\n          break;\n        case 'Views':\n          valA = a.resource.page_views.page_views_total;\n          valB = b.resource.page_views.page_views_total;\n          break;\n        default:\n      }\n\n      return (valA < valB ? 1 : -1) * (asc ? 1 : -1);\n    });\n  }, [searchTerm, datasets, type, asc]);\n}\n\nexport function useUniqueColumnEntries(dataset, column) {\n  const [uniqueEntries, setUniqueEntries] = useState(null);\n  useEffect(() => {\n    getUniqueEntries(dataset, column).then((res) => {\n      setUniqueEntries({\n        dataset: dataset.resource.id,\n        column,\n        distinct: res,\n      });\n    });\n  }, [dataset, column]);\n  return uniqueEntries;\n}\n","import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport Dexie from 'dexie';\n\nexport const CollectionsContext = createContext();\n\n// A collection has the form\n// datasets : array of dataset ids\n// name : the name of the collection\n// id : a random id for the collection\n// description : short 255 character description of the collection\n//\nconst initalState = {\n  collections: [{ id: 'pending', datasets: [], name: 'pending' }],\n  activeCollectionID: 'pending',\n};\n\nconst db = new Dexie('CollectionCache');\ndb.version(1).stores({\n  CollectionCache: 'id',\n});\n\nconst reducer = (state, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case 'SET_ACTIVE_COLLECTION':\n      return {\n        ...state,\n        activeCollectionID: payload,\n      };\n\n    case 'CREATE_COLLECTION_FROM_PENDING':\n      return {\n        ...state,\n        collections: [\n          ...state.collections,\n          {\n            ...state.collections.find((c) => c.id === 'pending'),\n            id: payload.id,\n            createdAt: new Date(),\n            name: payload.name,\n          },\n        ].map((c) =>\n          c.id === 'pending'\n            ? { id: 'pending', datasets: [], name: 'pending' }\n            : c,\n        ),\n      };\n    case 'ADD_TO_COLLECTION':\n      return {\n        ...state,\n        collections: state.collections.map((col) =>\n          col.id === payload.id\n            ? {\n                ...col,\n                datasets: [...col.datasets, payload.datasetID],\n              }\n            : col,\n        ),\n      };\n    case 'REMOVE_FROM_COLLECTION':\n      return {\n        ...state,\n        collections: state.collections.map((col) =>\n          col.id === payload.id\n            ? {\n                ...col,\n                datasets: col.datasets.filter((d) => d !== payload.datasetID),\n              }\n            : col,\n        ),\n      };\n    case 'SET_NAME':\n      return {\n        ...state,\n        collections: [\n          ...state,\n          state.collections.map((col) =>\n            col.id === payload.id ? { ...col, name: payload.name } : col,\n          ),\n        ],\n      };\n    case 'CLEAR_COLLECTION':\n      return {\n        ...state,\n        collections: [\n          ...state,\n          state.collections.map((col) =>\n            col.id === payload.id ? { ...col, datasets: [] } : col,\n          ),\n        ],\n      };\n\n    case 'DELETE_COLLECTION':\n      return {\n        ...state,\n        collections: state.collections.filter((col) => col.id !== payload.id),\n      };\n\n    case 'HYDRATE_STATE':\n      return {\n        ...state,\n        ...payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const CollectionsProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initalState);\n  const { cacheLoaded, collections, activeCollectionID } = state;\n\n  // Restore state\n  useEffect(() => {\n    db.CollectionCache.get(1).then((result) => {\n      if (result) {\n        const cachedState = JSON.parse(result.data);\n        dispatch({\n          type: 'HYDRATE_STATE',\n          payload: {\n            ...initalState,\n            ...cachedState,\n            cacheLoaded: true,\n          },\n        });\n      } else {\n        dispatch({\n          payload: { ...initalState, cacheLoaded: true },\n          type: 'HYDRATE_STATE',\n        });\n      }\n    });\n  }, []);\n\n  // Cache state\n  useEffect(() => {\n    if (cacheLoaded) {\n      db.CollectionCache.put({\n        data: JSON.stringify({\n          collections,\n          activeCollectionID,\n        }),\n        id: 1,\n      });\n    }\n  }, [cacheLoaded, collections, activeCollectionID]);\n\n  return (\n    <CollectionsContext.Provider value={[state, dispatch]}>\n      {children}\n    </CollectionsContext.Provider>\n  );\n};\n\nexport const useCollectionsValue = () => useContext(CollectionsContext);\n","import uuidv4 from 'uuid/v4';\nimport { useCollectionsValue } from '../contexts/CollectionsContext';\n\nexport function useCurrentCollection() {\n  const [state, dispatch] = useCollectionsValue();\n  const { activeCollectionID, pendingCollection } = state;\n\n  const collection = activeCollectionID\n    ? state.collections.find((c) => c.id === state.activeCollectionID)\n    : pendingCollection;\n\n  const addToCollection = (collectionID, datasetID) => {\n    dispatch({\n      type: 'ADD_TO_COLLECTION',\n      payload: { id: collectionID, datasetID },\n    });\n  };\n\n  const createCollectionFromPending = (name) => {\n    const id = uuidv4();\n    dispatch({\n      type: 'CREATE_COLLECTION_FROM_PENDING',\n      payload: { name, id },\n    });\n    dispatch({\n      type: 'SET_ACTIVE_COLLECTION',\n      payload: id,\n    });\n  };\n\n  const removeFromCollection = (collectionID, datasetID) =>\n    dispatch({\n      type: 'REMOVE_FROM_COLLECTION',\n      payload: { id: collectionID, datasetID },\n    });\n\n  const setName = (name, collectionID) =>\n    dispatch({\n      type: 'SET_NAME',\n      payload: { id: collectionID, name },\n    });\n\n  const clearCollection = (collectionID) => {\n    dispatch({ type: 'CLEAR_COLLECTION', payload: { id: collectionID } });\n  };\n  return [\n    collection,\n    {\n      clearCollection,\n      addToCollection,\n      removeFromCollection,\n      setName,\n      createCollectionFromPending,\n    },\n  ];\n}\n\nexport function useCollections() {\n  const [state, dispatch] = useCollectionsValue();\n  const deleteCollection = (collectionID) => {\n    dispatch({\n      type: 'DELETE_COLLECTION',\n      payload: collectionID,\n    });\n  };\n  const setActiveCollection = (collectionID) => {\n    dispatch({\n      type: 'SET_ACTIVE_COLLECTION',\n      payload: collectionID,\n    });\n  };\n  return [state, { deleteCollection, setActiveCollection }];\n}\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useGetDatasetsByIds } from '../../hooks/datasets';\nimport { useCollections, useCurrentCollection } from '../../hooks/collections';\n\nimport './CollectionTab.scss';\n\nexport default function CollectionTab({ visible, onDismiss }) {\n  const [{ collections }, { setActiveCollection }] = useCollections();\n  const [\n    collection,\n    { removeFromCollection, createCollectionFromPending },\n  ] = useCurrentCollection();\n  const currentCollectionDatasets = useGetDatasetsByIds(collection.datasets);\n  const [newCollectionName, setNewCollectionName] = useState('');\n  const [tab, setTab] = useState('add');\n\n  const createCollection = () => {\n    createCollectionFromPending(newCollectionName);\n    setTab('add');\n  };\n\n  const selectCollection = (collectionID) => {\n    setActiveCollection(collectionID);\n    setTab('add');\n  };\n\n  const getAgency = (dataset) => {\n    return dataset?.classification.domain_metadata?.find(\n      ({ key }) => key === 'Dataset-Information_Agency',\n    )?.value;\n  };\n\n  if (!visible) return '';\n\n  return (\n    <div className=\"collection-tab\">\n      {tab === 'create' && (\n        <div className=\"collections-tab-create\">\n          <h2>Create Collection</h2>\n          <div className=\"collections-tab-create-options\">\n            <p>Name your new collection</p>\n            <input\n              placeholder=\"name\"\n              type=\"text\"\n              value={newCollectionName}\n              onChange={(e) => setNewCollectionName(e.target.value)}\n            />\n            {collection.id === 'pending' && (\n              <>\n                <p>With datasets:</p>\n                <ul>\n                  {currentCollectionDatasets.map((c) => (\n                    <li className=\"collection-tab-dataset\">\n                      <div>\n                        <p className=\"name\">{c.resource.name}</p>\n                        <p className=\"agency\"> {getAgency(c)}</p>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n\n      {tab === 'add' && (\n        <div className=\"add-to-collection\">\n          <div className=\"add-to-header\">\n            {collection.id !== 'pending' ? (\n              <>\n                <h3>Currently adding to</h3>\n                <p className=\"collection-name\">{collection.name}</p>\n              </>\n            ) : (\n              <>\n                <h3>Create a new dataset form selection</h3>\n              </>\n            )}\n            {collections.length > 2 && (\n              <button type=\"button\" onClick={() => setTab('switch')}>\n                Switch Collection\n              </button>\n            )}\n          </div>\n\n          <div className=\"collection-tab-current-collection\">\n            {currentCollectionDatasets.length === 0 ? (\n              <div className=\"datasets-placeholder\">\n                <h3>\n                  {collection.id === 'pending'\n                    ? 'No datasets selected'\n                    : 'This collection is empty'}\n                </h3>\n\n                <p>\n                  Select `&quot;`Add to Collection`&quot;` to begin creating\n                  local collections.\n                </p>\n              </div>\n            ) : (\n              <ul>\n                {currentCollectionDatasets.map((d) => (\n                  <li key={d.resource.name} className=\"collection-tab-dataset\">\n                    <div>\n                      <p className=\"name\">{d.resource.name}</p>\n                      <p className=\"agency\">{getAgency(d)}</p>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() =>\n                        removeFromCollection(collection.id, d.resource.id)\n                      }\n                    >\n                      Remove\n                    </button>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n        </div>\n      )}\n      {tab === 'switch' && (\n        <div className=\"collections-tab-switch\">\n          <div className=\"switch-header\">\n            <h3>Select a Collection to add to</h3>\n          </div>\n          {collections.length === 1 ? (\n            <div className=\"datasets-placeholder\">\n              <h3>No collections yet</h3>\n            </div>\n          ) : (\n            <ul className=\"existing-collections-list\">\n              {collections\n                .filter((c) => c.id !== 'pending')\n                .map((c) => (\n                  <li className=\"existing-collection\">\n                    <div className=\"exisiting-colections-deets\">\n                      <button\n                        type=\"button\"\n                        className=\"select-collection-button\"\n                        onClick={() => selectCollection(c.id)}\n                      >\n                        <p className=\"name\">{c.name}</p>\n                        <p className=\"dataset-count\">\n                          {' '}\n                          {c.datasets.length} datasets{' '}\n                        </p>\n                      </button>\n                    </div>\n                  </li>\n                ))}\n            </ul>\n          )}\n        </div>\n      )}\n\n      {tab === 'create' && (\n        <div className=\"collection-tab-buttons\">\n          <button type=\"submit\" onClick={createCollection}>\n            Create\n          </button>\n          <button type=\"button\" onClick={() => setTab('add')}>\n            Cancel\n          </button>\n        </div>\n      )}\n      {tab === 'add' && (\n        <div className=\"collection-tab-buttons\">\n          <button type=\"submit\" onClick={() => setTab('create')}>\n            Create Collection\n          </button>\n\n          <Link to=\"/collections\">\n            <button onClick={onDismiss} type=\"submit\">\n              My Collections\n            </button>\n          </Link>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { NavLink, Link } from 'react-router-dom';\nimport './SideNav.scss';\nimport { ReactComponent as ExploreSVG } from '../../icons/explore.svg';\nimport { ReactComponent as CollectionsSVG } from '../../icons/collection.svg';\nimport { ReactComponent as DataClinicSVG } from '../../icons/dataClinicWhite.svg';\n\nimport CollectionTab from '../CollectionTab/CollectionTab';\nimport { useCurrentCollection } from '../../hooks/collections';\n\nexport default function SideNav() {\n  const [showCollectionTab, setShowCollectionTab] = useState(false);\n  const [collection] = useCurrentCollection();\n\n  return (\n    <nav className=\"side-nav\">\n      <Link alt=\"Data Clinic\" className=\"title\" to=\"/\">\n        <h2 className=\"scout-h2\">scout</h2>\n\n        <p className=\"scout-sub\">by data clinic</p>\n      </Link>\n      <NavLink\n        activeClassName=\"active-nav\"\n        alt=\"Explore\"\n        className=\"explore\"\n        exact\n        to=\"/\"\n      >\n        <ExploreSVG />\n        <h1>Explore</h1>\n      </NavLink>\n      <div className=\"collections-button\" style={{ position: 'relative' }}>\n        {collection.datasets.length > 0 && (\n          <div className=\"collection-counter\">{collection.datasets.length}</div>\n        )}\n        <button\n          onClick={() => setShowCollectionTab(!showCollectionTab)}\n          type=\"button\"\n          className=\"header-button\"\n        >\n          <CollectionsSVG />\n          <h1>Collections</h1>\n        </button>\n        <CollectionTab\n          visible={showCollectionTab}\n          onDismiss={() => setShowCollectionTab(false)}\n        />\n      </div>\n      <NavLink\n        exact\n        activeClassName=\"active-nav\"\n        alt=\"about\"\n        className=\"about\"\n        to=\"/about\"\n      >\n        <DataClinicSVG />\n        <h1>About</h1>\n      </NavLink>\n    </nav>\n  );\n}\n","import React from 'react';\nimport DOMPurify from 'dompurify';\n\n/* Simple component to sanitize HTML and display it.\n *  Need this for making sure we can display the\n *  dataset descriptions properly\n */\n\nexport default function RawHTML({ html, className }) {\n  const cleanedHTML = DOMPurify.sanitize(html);\n  return (\n    <div\n      className={className}\n      dangerouslySetInnerHTML={{ __html: cleanedHTML }}\n    />\n  );\n}\n","import React from 'react';\nimport RawHTML from '../components/RawHTML/RawHTML';\n\nexport function formatDate(date) {\n    const options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n    };\n    return new Date(date).toLocaleDateString('en-US', options);\n}\n\nexport function hilightMatches(text, query) {\n    if (query) {\n        const regex = new RegExp(`(${query})`, 'ig');\n        return (\n            <RawHTML\n                html={text.replace(\n                    regex,\n                    (match) => `<span class=\"hilight\">${match}</span>`,\n                )}\n            />\n        );\n    }\n    return text;\n}\n\nexport function constructCollectionLink(collection) {\n    return `/collection/${collection.name}/${collection.datasets.join(',')}`;\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"rect\", {\n  id: \"joinable-a\",\n  width: 6,\n  height: 16,\n  x: 8,\n  y: 0\n}), React.createElement(\"mask\", {\n  id: \"joinable-b\",\n  width: 6,\n  height: 16,\n  x: 0,\n  y: 0,\n  fill: \"#fff\",\n  maskContentUnits: \"userSpaceOnUse\",\n  maskUnits: \"objectBoundingBox\"\n}, React.createElement(\"use\", {\n  xlinkHref: \"#joinable-a\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  stroke: \"#1C4D5E\"\n}, React.createElement(\"rect\", {\n  width: 5,\n  height: 15,\n  x: 0.5,\n  y: 0.5\n}), React.createElement(\"use\", {\n  strokeDasharray: \"2 2\",\n  strokeWidth: 2,\n  mask: \"url(#joinable-b)\",\n  xlinkHref: \"#joinable-a\"\n}));\n\nvar SvgJoinable = function SvgJoinable(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 16,\n    viewBox: \"0 0 14 16\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgJoinable, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/joinable.93c21e40.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  stroke: \"#1C4D5E\"\n}, React.createElement(\"path\", {\n  d: \"M12.0010147,2 C14.0927599,3.21047734 15.5,5.47236816 15.5,8.06293752 C15.5,10.6535069 14.0927599,12.9153977 12.0010147,14.125875 C9.90763242,12.9160283 8.5,10.653868 8.5,8.06293752 C8.5,5.50992312 9.86673488,3.27612674 11.9084482,2.05330481 L12.0010147,2 Z M8.68122745,8.58205248 L13.498517,3.76476294 M9.2972735,10.9660064 L14.70139,5.56188997 M10.4825147,12.8052417 L15.3419124,7.94584391\"\n}), React.createElement(\"path\", {\n  d: \"M16,0.5 C14.634207,0.5 13.3536098,0.864916567 11.7507242,1.5036895 C10.6474352,0.865224382 9.36635521,0.5 8,0.5 C5.92893219,0.5 4.05393219,1.33946609 2.69669914,2.69669914 C1.33946609,4.05393219 0.5,5.92893219 0.5,8 C0.5,10.0710678 1.33946609,11.9460678 2.69669914,13.3033009 C4.05393219,14.6605339 5.92893219,15.5 8,15.5 C9.36630099,15.5 10.6473408,15.1348186 12.250213,14.4968528 C13.3532903,15.1349825 14.6340316,15.5 16,15.5 C18.0710678,15.5 19.9460678,14.6605339 21.3033009,13.3033009 C22.6605339,11.9460678 23.5,10.0710678 23.5,8 C23.5,5.92893219 22.6605339,4.05393219 21.3033009,2.69669914 C19.9460678,1.33946609 18.0710678,0.5 16,0.5 Z\"\n}));\n\nvar SvgThematicSimilarity = function SvgThematicSimilarity(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 16,\n    viewBox: \"0 0 24 16\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgThematicSimilarity, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/thematicSimilarity.043de5d7.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExternalLinkAlt } from '@fortawesome/free-solid-svg-icons';\n\nexport default ({ permalink }) => (\n  <a\n    className=\"external-link\"\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    href={permalink}\n  >\n    <button type=\"button\">\n      View on Open Data&nbsp;\n      <FontAwesomeIcon icon={faExternalLinkAlt} />\n    </button>\n  </a>\n);\n","import React from 'react';\nimport './Dataset.scss';\nimport { Link } from 'react-router-dom';\nimport { hilightMatches, formatDate } from '../../utils/formatters';\nimport { useGetSimilarDatasets, useGetJoinNumbers } from '../../hooks/datasets';\nimport { ReactComponent as ThematicIcon } from '../../icons/joinable.svg';\nimport { ReactComponent as JoinIcon } from '../../icons/thematicSimilarity.svg';\n\n// import RawHTML from '../RawHTML/RawHTML';\nimport ViewOnOpenPortal from '../ViewOnOpenPortal/ViewOnOpenPortal';\n\nexport default function Dataset({\n  dataset,\n  onAddToCollection,\n  onRemoveFromCollection,\n  inCollection,\n  viewInOpenPortal = false,\n  similarity,\n  query,\n}) {\n  const formattedName = hilightMatches(dataset.resource.name, query);\n  const similarDatasets = useGetSimilarDatasets(dataset.resource.id);\n  const joinNumber = useGetJoinNumbers(dataset.resource.id);\n  const formattedDescription = hilightMatches(\n    dataset.resource.description,\n    query,\n  );\n  return (\n    <div className=\"dataset\" key={dataset.resource.id}>\n      <div className=\"dataset-title\">\n        <p>{dataset.resource.attribution}</p>\n        <Link className=\"title\" to={`/dataset/${dataset.resource.id}`}>\n          <h2>{formattedName}</h2>\n        </Link>\n      </div>\n\n      {onAddToCollection && (\n        <button\n          type=\"button\"\n          onClick={() =>\n            inCollection\n              ? onRemoveFromCollection(dataset.resource.id)\n              : onAddToCollection(dataset.resource.id)\n          }\n        >\n          {inCollection ? 'Remove from collection' : 'Add to collection'}\n        </button>\n      )}\n      {similarity && (\n        <p className=\"similarity\">\n          <p className=\"header\">Similarity</p>\n          <p>{(similarity * 100).toPrecision(2)}%</p>\n        </p>\n      )}\n      {viewInOpenPortal && <ViewOnOpenPortal permalink={dataset.permalink} />}\n      <div className=\"comparison-stats\">\n        <div className=\"comparison-stat dataset-join-thematic\">\n          <ThematicIcon />\n          <span>{Math.max(similarDatasets.length - 1, 0)}</span>\n        </div>\n        <div className=\"comparison-stat dataset-join-join\">\n          <JoinIcon />\n          <span>{joinNumber}</span>\n        </div>\n      </div>\n      <div className=\"dataset-description\">{formattedDescription}</div>\n      <div className=\"dataset-meta\">\n        <div className=\"update-frequency\">\n          <span>Update frequency:</span>\n          weekly\n        </div>\n        <div className=\"dataset-last-updated\">\n          <span>Last Update at:</span>\n          {formatDate(dataset.resource.updatedAt)}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { faSortUp, faSortDown } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport './SortMenu.scss';\n\nexport default function SortMenu({\n  options,\n  selected,\n  direction,\n  onSelected,\n  onDirection,\n}) {\n  const [expanded, setExpanded] = useState(false);\n  return (\n    <div className={`sort-menu ${expanded ? 'expanded' : ''}`}>\n      <div className=\"wrapper\">\n        <span>Sort By:</span>\n        <ul>\n          <li onClick={() => setExpanded(!expanded)}>{selected}</li>\n          {options\n            .filter((o) => o !== selected)\n            .map((option) => (\n              <li\n                onClick={() => {\n                  onSelected(option);\n                  setExpanded(false);\n                }}\n                key={option}\n              >\n                {option}{' '}\n              </li>\n            ))}\n        </ul>\n        <FontAwesomeIcon\n          onClick={() => onDirection(direction === 'asc' ? 'desc' : 'asc')}\n          icon={direction === 'asc' ? faSortUp : faSortDown}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport './DatasetsLoading.scss';\nimport '../Loading.scss';\n\nexport default () => (\n  <div className=\"datasets-loading\">\n    {[...Array(4)].map((_, i) => (\n      <div key={i} className=\"dataset\">\n        <div className=\"dataset-title animate\" />\n        <p className=\"dataset-description animate\" />\n        <div className=\"dataset-meta animate\" />\n      </div>\n    ))}\n  </div>\n);\n","import React, { useState, useMemo, useEffect } from 'react';\nimport ReactPaginate from 'react-paginate';\n\nexport default function usePagination(data, perPage = 20) {\n  const pages = useMemo(() => Math.ceil(data.length / perPage), [\n    data,\n    perPage,\n  ]);\n  const [currentPageNo, setCurrentPageNo] = useState(0);\n\n  useEffect(() => {\n    setCurrentPageNo(0);\n  }, [pages]);\n\n  const pageButtons = (\n    <nav>\n      <ReactPaginate\n        previousLabel=\"previous\"\n        nextLabel=\"next\"\n        breakLabel=\"...\"\n        breakClassName=\"break-me\"\n        pageCount={pages}\n        onPageChange={({ selected: page }) => {\n          setCurrentPageNo(page);\n        }}\n        containerClassName=\"pagination\"\n        subContainerClassName=\"pages pagination\"\n        activeClassName=\"active\"\n        previousClassName=\"page-item\"\n        nextClassName=\"page-item\"\n        pageClassName=\"page-item\"\n      />\n    </nav>\n  );\n\n  const content = data.slice(\n    currentPageNo * perPage,\n    (currentPageNo + 1) * perPage,\n  );\n\n  return [\n    content,\n    {\n      pageButtons,\n    },\n  ];\n}\n","import { useEffect } from 'react';\n\nexport default function usePageView(page, params) {\n    useEffect(() => {\n        const pageView = page || window.location.pathname;\n        window.fathom('trackPageview', { path: pageView });\n    }, [page]);\n}\n","import React from 'react';\nimport './FilterLoading.scss';\nimport '../Loading.scss';\n\nexport default () => (\n  <div className=\"\">\n    <div className=\"filter-loading-wrapper\">\n      {[...Array(10)].map((_, i) => (\n        <li key={i} className=\"multi-buttons\">\n          <input type=\"checkbox\" disabled className=\"checkbox\" />\n          <span className=\"animate item-name\" />\n          <span className=\"animate pill\" />\n        </li>\n      ))}\n    </div>\n  </div>\n);\n","import React, { useState, useMemo, useEffect } from 'react';\nimport useFuse from 'react-use-fuse';\nimport usePagenation from '../../hooks/pagination';\nimport { useStateLoaded } from '../../hooks/datasets';\nimport FilterLoading from '../Loading/FilterLoading/FilterLoading';\nimport './MultiSelector.scss';\n\nexport default function MultiSelector({\n  items,\n  selected,\n  onChange,\n  title,\n  collapse,\n  onCollapse,\n}) {\n  const [collapsed, setCollapsed] = useState(true);\n\n  const collapsedActual = collapse === null ? collapsed : collapse;\n\n  const toggleCollapsed = () => {\n    if (onCollapse) {\n      onCollapse(!collapsedActual);\n    } else {\n      setCollapsed(!collapsedActual);\n    }\n  };\n\n  const clearItems = () => {\n    onChange([]);\n  };\n\n  const loaded = useStateLoaded();\n\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const toggleItem = (item) => {\n    const newSelection = selected.includes(item)\n      ? selected.filter((i) => i !== item)\n      : [...selected, item];\n    onChange(newSelection);\n  };\n\n  const itemNames = useMemo(() => items && Object.keys(items), [items]);\n\n  const { result: filteredItems, search } = useFuse({\n    data: itemNames.map((item) => ({\n      name: item,\n    })),\n    options: {\n      keys: ['name'],\n      shouldSort: false,\n      findAllMatches: true,\n      caseSensitive: false,\n    },\n  });\n\n  useEffect(() => search(searchTerm), [search, searchTerm]);\n\n  const sortedItems = useMemo(\n    () =>\n      filteredItems\n        ?.map((item) => item.name)\n        .sort((a, b) => (items[a] < items[b] ? 1 : -1)),\n    [filteredItems, items],\n  );\n\n  const [pagedItems, { pageButtons }] = usePagenation(sortedItems, 10);\n\n  return (\n    <div className=\"mutli-selector\">\n      <h2>\n        <button\n          className=\"header-button\"\n          type=\"button\"\n          onClick={() => toggleCollapsed()}\n        >\n          {title} <span> {collapsedActual ? '+' : '-'}</span>{' '}\n        </button>\n      </h2>\n\n      {!collapsedActual && (\n        <>\n          <div className=\"search\">\n            <input\n              disabled={!loaded}\n              placeholder=\"filter\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n          </div>\n          <ul className=\"multi-list\">\n            {!loaded ? (\n              <FilterLoading />\n            ) : (\n              pagedItems.map((item) => (\n                // eslint-disable-next-line\n                <li\n                  key={item}\n                  onClick={() => toggleItem(item)}\n                  className={`multi-buttons ${\n                    selected && selected.includes(item) ? 'selected' : ''\n                  }`}\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={selected && selected.includes(item)}\n                    className=\"checkbox\"\n                  />\n                  <span className=\"item-name\">{item}</span>\n                  <span className=\"pill\">{items[item]}</span>\n                </li>\n              ))\n            )}\n          </ul>\n          {pageButtons}\n          {selected && selected.length > 0 && (\n            <button type=\"button\" onClick={clearItems}>\n              clear\n            </button>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","import React, { createContext, useContext, useReducer } from 'react';\n\nexport const SearchContext = createContext();\n\nconst initalState = {\n  term: '',\n  tags: [],\n  categories: [],\n  departments: [],\n  columns: [],\n  sortVariable: 'name',\n  sortOrder: 'asc',\n  collapseFilters: true,\n  collapsedFilterList: {\n    categories: true,\n    tags: true,\n    departments: true,\n    columns: true,\n  },\n};\n\nconst reducer = (state, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case 'ADD_TAG':\n      return { ...state, tags: [...state.tags, payload] };\n    case 'REMOVE_TAG':\n      return { ...state, tags: state.tags.filter((t) => t !== payload) };\n    case 'ADD_CATEGORY':\n      return { ...state, categories: [...state.categories, payload] };\n    case 'REMOVE_CATEGORY':\n      return {\n        ...state,\n        category: state.category.filter((t) => t !== payload),\n      };\n    case 'ADD_COLUMN':\n      return { ...state, columns: [...state.columns, payload] };\n    case 'REMOVE_COLUMN':\n      return {\n        ...state,\n        columns: state.columns.filter((t) => t !== payload),\n      };\n    case 'ADD_DEPARTMNET':\n      return { ...state, departments: [...state.departments, payload] };\n    case 'REMOVE_DEPARTMENT':\n      return {\n        ...state,\n        departments: state.departments.filter((t) => t !== payload),\n      };\n    case 'CLEAR':\n      return initalState;\n    case 'SET_TAGS':\n      return { ...state, tags: payload };\n    case 'SET_DEPARTMENTS':\n      return { ...state, departments: payload };\n    case 'SET_CATEGORIES':\n      return { ...state, categories: payload };\n    case 'SET_COLUMNS':\n      return { ...state, columns: payload };\n    case 'SET_SORT_ORDER':\n      return { ...state, sortOrder: payload };\n    case 'SET_COLLAPSE_FILTER_BAR':\n      return { ...state, collapseFilters: payload };\n    case 'SET_FILTER_STATE':\n      return {\n        ...state,\n        collapsedFilterList: {\n          ...state.collapsedFilterList,\n          [payload.filter]: payload.state,\n        },\n      };\n    case 'SET_SORT_VARIABLE':\n      return { ...state, sortVariable: payload };\n    case 'SET_TERM':\n      return { ...state, term: payload };\n    default:\n      return state;\n  }\n};\n\nexport const SearchProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initalState);\n\n  return (\n    <SearchContext.Provider value={[state, dispatch]}>\n      {children}\n    </SearchContext.Provider>\n  );\n};\n\nexport const useSearchState = () => useContext(SearchContext);\n","import React from 'react';\nimport './HomePage.scss';\nimport { DebounceInput } from 'react-debounce-input';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faAngleLeft,\n  faAngleDown,\n  faSearch,\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  useCategories,\n  useTags,\n  useDepartments,\n  useDatasets,\n  useColumns,\n  useStateLoaded,\n  useSortDatasetsBy,\n} from '../../hooks/datasets';\nimport { useCurrentCollection } from '../../hooks/collections';\nimport Dataset from '../../components/Dataset/Dataset';\nimport SortMenu from '../../components/SortMenu/SortMenu';\nimport DatasetsLoading from '../../components/Loading/DatasetsLoading/DatasetsLoading';\nimport usePagination from '../../hooks/pagination';\nimport usePageView from '../../hooks/analytics';\nimport MultiSelector from '../../components/MultiSelector/MultiSelector';\nimport {\n  useSelectedCategories,\n  useSelectedTags,\n  useSelectedDepartments,\n  useSelectedColumns,\n  useSearchTerm,\n  useSortVariable,\n  useSortOrder,\n  useFilterBarState,\n  useFilterUIStates,\n} from '../../hooks/search';\n\nexport default function HomePage() {\n  usePageView();\n  const categories = useCategories();\n  const tags = useTags();\n  const departments = useDepartments();\n  const columns = useColumns();\n  const loaded = useStateLoaded();\n  //    const [colpaseFilters, setCollapseFilters] = useState(true);\n\n  const [selectedTags, setSelectedTags] = useSelectedTags();\n  const [selectedColumns, setSelectedColumns] = useSelectedColumns();\n  const [selectedCategories, setSelectedCategories] = useSelectedCategories();\n  const [\n    selectedDepartments,\n    setSelectedDepartments,\n  ] = useSelectedDepartments();\n  const [searchTerm, setSearchTerm] = useSearchTerm();\n  const [sortBy, setSortBy] = useSortVariable();\n  const [sortDirection, setSortDirection] = useSortOrder();\n\n  const [\n    collection,\n    { addToCollection, removeFromCollection },\n  ] = useCurrentCollection();\n\n  const { datasets } = useDatasets({\n    tags: selectedTags,\n    categories: selectedCategories,\n    columns: selectedColumns,\n    term: searchTerm,\n    departments: selectedDepartments,\n  });\n\n  const [collapseFilterBar, setCollapseFilterBar] = useFilterBarState();\n  const [filterStates, setFilterState] = useFilterUIStates();\n\n  const sortedDatasets = useSortDatasetsBy(\n    datasets,\n    sortBy,\n    sortDirection === 'asc',\n    searchTerm,\n  );\n\n  const [pagedDatasets, { pageButtons }] = usePagination(sortedDatasets, 5);\n\n  return (\n    <div className=\"home-page\">\n      <div className={`filters ${collapseFilterBar ? 'collapsed' : ''}`}>\n        {!collapseFilterBar ? (\n          <>\n            <h2 className=\"filter-header\">\n              <button\n                onKeyDown={() => setCollapseFilterBar(true)}\n                onClick={() => setCollapseFilterBar(true)}\n                className=\"header-button\"\n                type=\"button\"\n              >\n                Filters <FontAwesomeIcon icon={faAngleLeft} />\n              </button>\n            </h2>\n            <div className=\"filters-scroll-area\">\n              <div className=\"categories\">\n                <MultiSelector\n                  items={categories}\n                  onChange={setSelectedCategories}\n                  selected={selectedCategories}\n                  collapse={filterStates.categories}\n                  onCollapse={(collapsed) =>\n                    setFilterState('categories', collapsed)\n                  }\n                  title=\"Categories\"\n                />\n              </div>\n              <div className=\"departments\">\n                <MultiSelector\n                  items={departments}\n                  selected={selectedDepartments}\n                  onChange={setSelectedDepartments}\n                  collapse={filterStates.departments}\n                  onCollapse={(collapsed) =>\n                    setFilterState('departments', collapsed)\n                  }\n                  title=\"Departments\"\n                />\n              </div>\n              <div className=\"columns\">\n                <MultiSelector\n                  items={columns}\n                  selected={selectedColumns}\n                  onChange={setSelectedColumns}\n                  collapse={filterStates.columns}\n                  onCollapse={(collapsed) =>\n                    setFilterState('columns', collapsed)\n                  }\n                  title=\"Columns\"\n                />\n              </div>\n              <div className=\"tags\">\n                <MultiSelector\n                  items={tags}\n                  selected={selectedTags}\n                  onChange={setSelectedTags}\n                  collapse={filterStates.tags}\n                  onCollapse={(collapsed) => setFilterState('tags', collapsed)}\n                  title=\"Tags\"\n                />\n              </div>\n            </div>\n          </>\n        ) : (\n          <>\n            <h2>\n              <button\n                onKeyDown={() => setCollapseFilterBar(false)}\n                onClick={() => setCollapseFilterBar(false)}\n                className=\"header-button\"\n                type=\"button\"\n              >\n                Filters\n                <FontAwesomeIcon icon={faAngleDown} />\n              </button>\n            </h2>\n          </>\n        )}\n      </div>\n      <div className=\"datasets\">\n        <div className=\"search\">\n          <FontAwesomeIcon size=\"lg\" icon={faSearch} />\n          <DebounceInput\n            type=\"text\"\n            onChange={(e) => setSearchTerm(e.target.value)}\n            value={searchTerm}\n            debounceTimeout={1000}\n            placeholder=\"Search for dataset\"\n          />\n        </div>\n        <div className=\"count-and-sort\">\n          <p>\n            <span className=\"bold\">{datasets.length}</span> datasets{' '}\n            {searchTerm ? 'sorted by relevance' : ''}\n          </p>\n\n          {searchTerm ? null : (\n            <SortMenu\n              options={[\n                'Name',\n                'Created At',\n                'Updated At',\n                'Downloads',\n                'Views',\n              ]}\n              onDirection={(direction) => setSortDirection(direction)}\n              selected={sortBy}\n              direction={sortDirection}\n              onSelected={(selected) => setSortBy(selected)}\n            />\n          )}\n        </div>\n\n        <ul className=\"dataset-list\">\n          {loaded ? (\n            pagedDatasets.map((dataset) => (\n              <Dataset\n                key={dataset?.resource?.id}\n                dataset={dataset}\n                inCollection={collection.datasets.includes(dataset.resource.id)}\n                onAddToCollection={(datasetID) =>\n                  addToCollection(collection.id, datasetID)\n                }\n                onRemoveFromCollection={(datasetID) =>\n                  removeFromCollection(collection.id, datasetID)\n                }\n                query={searchTerm}\n              />\n            ))\n          ) : (\n            <DatasetsLoading />\n          )}\n        </ul>\n        <div>{pageButtons}</div>\n      </div>\n    </div>\n  );\n}\n","import { useSearchState } from '../contexts/SearchContext';\n\nexport function useSelectedTags() {\n  const [{ tags }, dispatch] = useSearchState();\n  const setSelectedTags = (newTags) => {\n    dispatch({\n      type: 'SET_TAGS',\n      payload: newTags,\n    });\n  };\n  return [tags, setSelectedTags];\n}\n\nexport function useSelectedCategories() {\n  const [{ categories }, dispatch] = useSearchState();\n  const setSelectedCategories = (newCategories) => {\n    dispatch({\n      type: 'SET_CATEGORIES',\n      payload: newCategories,\n    });\n  };\n  return [categories, setSelectedCategories];\n}\n\nexport function useSelectedColumns() {\n  const [{ columns }, dispatch] = useSearchState();\n  const setSelectedColumns = (newColumns) => {\n    dispatch({\n      type: 'SET_COLUMNS',\n      payload: newColumns,\n    });\n  };\n  return [columns, setSelectedColumns];\n}\n\nexport function useSelectedDepartments() {\n  const [{ departments }, dispatch] = useSearchState();\n  const setSelectedDepartments = (newDepartments) => {\n    dispatch({\n      type: 'SET_DEPARTMENTS',\n      payload: newDepartments,\n    });\n  };\n  return [departments, setSelectedDepartments];\n}\n\nexport function useSearchTerm() {\n  const [{ term }, dispatch] = useSearchState();\n  const setSearchTerm = (newTerm) => {\n    dispatch({\n      type: 'SET_TERM',\n      payload: newTerm,\n    });\n  };\n  return [term, setSearchTerm];\n}\n\nexport function useSortVariable() {\n  const [{ sortVariable }, dispatch] = useSearchState();\n  const setSortVariable = (newSortVariable) => {\n    dispatch({\n      type: 'SET_SORT_VARIABLE',\n      payload: newSortVariable,\n    });\n  };\n  return [sortVariable, setSortVariable];\n}\n\nexport function useFilterUIStates() {\n  const [{ collapsedFilterList }, dispatch] = useSearchState();\n  const setFilterState = (filter, state) => {\n    dispatch({\n      type: 'SET_FILTER_STATE',\n      payload: { filter, state },\n    });\n  };\n  return [collapsedFilterList, setFilterState];\n}\nexport function useFilterBarState() {\n  const [{ collapseFilters }, dispatch] = useSearchState();\n\n  const setCollapseFilter = (collapse) => {\n    dispatch({\n      type: 'SET_COLLAPSE_FILTER_BAR',\n      payload: collapse,\n    });\n  };\n  return [collapseFilters, setCollapseFilter];\n}\nexport function useSortOrder() {\n  const [{ sortOrder }, dispatch] = useSearchState();\n  const setSearchTerm = (newSortOrder) => {\n    dispatch({\n      type: 'SET_SORT_ORDER',\n      payload: newSortOrder,\n    });\n  };\n  return [sortOrder, setSearchTerm];\n}\n","import React, { useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFile } from '@fortawesome/free-regular-svg-icons';\nimport { Link } from 'react-router-dom';\nimport {\n  faAngleRight,\n  faAngleDown,\n  faTable,\n} from '@fortawesome/free-solid-svg-icons';\nimport { useCurrentCollection } from '../../hooks/collections';\nimport './JoinColumn.scss';\n\nexport default function ColumnJoin({ rightDataset, matches }) {\n  const [collapsed, setCollapsed] = useState(true);\n  const [\n    collection,\n    { addToCollection, removeFromCollection },\n  ] = useCurrentCollection();\n\n  return (\n    <div className=\"join-column\">\n      <div className=\"join-column-row\">\n        <span\n          onClick={() => setCollapsed(!collapsed)}\n          onKeyDown={(e) => {\n            if (e.keycode === 32) {\n              setCollapsed(!collapsed);\n            }\n          }}\n          className=\"join-column-name\"\n          role=\"button\"\n          tabIndex=\"0\"\n        >\n          <FontAwesomeIcon icon={collapsed ? faAngleRight : faAngleDown} />\n          <FontAwesomeIcon icon={faFile} />\n          {rightDataset.resource.name}\n        </span>\n        <span>\n          {matches\n            ? `~ ${Math.floor(\n                (matches.matches.length * 100) / matches.leftSize,\n              ).toLocaleString()} % ids match`\n            : 'loading'}\n        </span>\n        <span>\n          <Link to={`/dataset/${rightDataset.resource.id}`}>View</Link>\n        </span>\n        <button\n          type=\"button\"\n          onClick={() =>\n            collection.datasets.includes(rightDataset.resource.id)\n              ? removeFromCollection(collection.id, rightDataset.resource.id)\n              : addToCollection(collection.id, rightDataset.resource.id)\n          }\n        >\n          {collection.datasets.includes(rightDataset.resource.id)\n            ? 'Remove from collection'\n            : 'Add to collection'}\n        </button>\n      </div>\n      {!collapsed &&\n        (matches ? (\n          <div className=\"join-column-unique\">\n            <h3>COMMON IDS</h3>\n            <ul>\n              {matches.matches.slice(0, 10).map((uid) => (\n                <li key={uid}>\n                  <div className=\"bar\" />\n                  <FontAwesomeIcon icon={faTable} />\n                  <span>{uid}</span>\n                </li>\n              ))}\n            </ul>\n            <div>\n              and{' '}\n              {matches.matches.length -\n                Math.min(10, matches.matches.slice(0, 10).length)}{' '}\n              more\n            </div>\n          </div>\n        ) : (\n          <h2>Loading</h2>\n        ))}\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleRight, faAngleDown } from '@fortawesome/free-solid-svg-icons';\nimport JoinColumn from '../JoinColumn/JoinColumn';\nimport './ColumnSuggestions.scss';\nimport usePagination from '../../hooks/pagination';\nimport { getUniqueEntries } from '../../utils/socrata';\n\nexport default function ColumnSuggestions({ column, joins, dataset }) {\n  const [collapsed, setCollapsed] = useState(true);\n  const [overlaps, setOverlaps] = useState([]);\n\n  const dataTypeForCol =\n    dataset.resource.columns_datatype[\n      dataset.resource.columns_name.indexOf(column)\n    ];\n\n  const [pagedJoins, { pageButtons }] = usePagination(\n    overlaps\n      ? overlaps\n          .sort((a, b) => (a.matches.length < b.matches.length ? 1 : -1))\n          .map((o) => joins.find((j) => j.dataset.resource.id === o.id))\n      : joins,\n    10,\n  );\n\n  useEffect(() => {\n    if (collapsed === false && overlaps.length === 0) {\n      if (joins.length > 0) {\n        getUniqueEntries(dataset, column).then((parentUniques) => {\n          joins.forEach((j) =>\n            getUniqueEntries(j.dataset, column)\n              .then((res) =>\n                setOverlaps((perviousOverlaps) => [\n                  ...perviousOverlaps,\n                  {\n                    id: j.dataset.resource.id,\n                    matches: parentUniques.filter((e) => res.includes(e)),\n                    leftSize: parentUniques.length,\n                  },\n                ]),\n              )\n              .catch(() => {\n                setOverlaps((perviousOverlaps) => [\n                  ...perviousOverlaps,\n                  {\n                    id: j.dataset.resource.id,\n                    matches: 0,\n                    error: 'failed to fetch',\n                  },\n                ]);\n              }),\n          );\n        });\n      }\n    }\n  }, [column, dataset, joins, collapsed, overlaps]);\n\n  return (\n    <div className={`column-suggestions ${collapsed ? 'collapsed' : ''}`}>\n      <div\n        className=\"table-row\"\n        role=\"button\"\n        onKeyDown={(e) => {\n          if (e.keyCode === 36) {\n            setCollapsed(!collapsed);\n          }\n        }}\n        onClick={() => setCollapsed(!collapsed)}\n        tabIndex=\"0\"\n      >\n        <span className=\"column-collapse\">\n          <FontAwesomeIcon icon={collapsed ? faAngleRight : faAngleDown} />{' '}\n          {column}\n        </span>\n        <span>{dataTypeForCol}</span>\n        <span>{joins.length} datasets</span>\n      </div>\n      {!collapsed && pagedJoins && (\n        <div className=\"columns-suggestions-matches\">\n          <h3>MATCHING DATASETS</h3>\n          {joins && overlaps && (\n            <ul>\n              {pagedJoins.map((join) => (\n                <li key={join.dataset.resource.id}>\n                  <JoinColumn\n                    leftDataset={dataset}\n                    rightDataset={join.dataset}\n                    joinCol={column}\n                    matches={overlaps.find(\n                      (o) => o.id === join.dataset.resource.id,\n                    )}\n                  />\n                </li>\n              ))}\n            </ul>\n          )}\n          {pageButtons}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useCallback, useMemo } from 'react';\nimport './ColumnMatchTable.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleRight } from '@fortawesome/free-solid-svg-icons';\nimport ColumnSuggestions from '../ColumnSuggestions/ColumnSuggestions';\n\nexport default function ColumnMatchTable({ dataset, joinColumns }) {\n  const columns = dataset?.resource?.columns_name || [];\n\n  const suggestionsForColumn = useCallback(\n    (col, candidates) => {\n      return columns\n        ? candidates.filter((c) =>\n            c.joinableColumns.includes(col.toLowerCase()),\n          )\n        : [];\n    },\n    [columns],\n  );\n\n  const sortedColumns = useMemo(\n    () =>\n      joinColumns\n        ? columns.sort((a, b) =>\n            suggestionsForColumn(a, joinColumns).length <\n            suggestionsForColumn(b, joinColumns).length\n              ? 1\n              : -1,\n          )\n        : [],\n    [columns, joinColumns, suggestionsForColumn],\n  );\n\n  return (\n    <div className=\"column-match-table\">\n      <div className=\"table-header\">\n        <ul className=\"table-row\">\n          <li>Column name</li>\n          <li>Column type</li>\n          <li># Potential joins</li>\n        </ul>\n      </div>\n      {dataset\n        ? sortedColumns.map((column) => (\n            <ColumnSuggestions\n              dataset={dataset}\n              column={column}\n              joins={suggestionsForColumn(column, joinColumns)}\n            />\n          ))\n        : [...Array(6)].map((_, i) => (\n            <div key={i} className=\"column-suggestions collapsed\">\n              <div className=\"table-row\" role=\"button\" tabIndex=\"0\">\n                <span className=\"column-collapse\">\n                  <FontAwesomeIcon icon={faAngleRight} /> ...\n                </span>\n                <span className=\"animate\"> </span>\n                <span className=\"animate\"> </span>\n              </div>\n            </div>\n          ))}\n    </div>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './Breadcrumb.scss';\n\nconst Breadcrumb = ({ currentPage }) => (\n  <div className=\"Breadcrumb\">\n    <Link to=\"/\">Home</Link>\n    <span> / {currentPage}</span>\n  </div>\n);\n\nexport default Breadcrumb;\n","import React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport RawHTML from '../../components/RawHTML/RawHTML';\nimport ColumnMatchTable from '../../components/ColumnMatchTable/ColumnMatchTable';\nimport Dataset from '../../components/Dataset/Dataset';\nimport Breadcrumb from '../../components/Breadcrumb/Breadcrumb';\nimport '../../components/Loading/Loading.scss';\nimport usePageView from '../../hooks/analytics';\nimport { useCurrentCollection } from '../../hooks/collections';\nimport {\n  useDataset,\n  useJoinableDatasets,\n  useGetSimilarDatasets,\n} from '../../hooks/datasets';\nimport './DatasetPage.scss';\nimport ViewOnOpenPortal from '../../components/ViewOnOpenPortal/ViewOnOpenPortal';\n\nconst formatDate = (date) => moment(date).format('MMMM DD, YYYY');\n\nexport default function DatasetPage({ match }) {\n  usePageView();\n  const { datasetID } = match.params;\n  const dataset = useDataset(datasetID);\n  const parentId = dataset ? dataset.resource.parent_fxf : null;\n  const parentDataset = useDataset(parentId);\n  const joins = useJoinableDatasets(dataset);\n  const [activeTab, setActiveTab] = useState('joins');\n  const resource = dataset?.resource;\n  const pageViews = resource?.page_views;\n  const classification = dataset?.classification;\n  const domainMetadata = classification?.domain_metadata;\n  const similarDatasets = useGetSimilarDatasets(datasetID);\n\n  useEffect(() => {\n    const page = `${window.location.pathname}/${activeTab}`;\n    window.fathom('trackPageview', { path: page });\n  }, [activeTab]);\n  useEffect(() => {\n    window.fathom('trackPageview', { path: '/about' });\n  }, []);\n\n  const mostSimilarDatasets = similarDatasets\n    .filter(\n      (suggestion) =>\n        suggestion.dataset && suggestion.dataset.resource.id !== datasetID,\n    )\n    .slice(0, 10);\n  const renderNotFound = (currentDataset, parentData) => {\n    if (parentData) {\n      return (\n        <p className=\"intro\">\n          This dataset is actually a view of dataset{' '}\n          {parentData?.resource?.name}\n        </p>\n      );\n    }\n    if (currentDataset?.resource?.type === 'file') {\n      return (\n        <p className=\"intro\">\n          {/* eslint-disable-next-line react/no-unescaped-entities */}\n          This resource points of a file which we currently don't have the\n          ability to analyse. We are working to bring more types of data to\n          Scout. Check back shortly\n        </p>\n      );\n    }\n    if (currentDataset?.resource?.type === 'href') {\n      return (\n        <p className=\"intro\">\n          This resource is actually just a link to a website resource. We\n          currently dont have the ability to provide information on such\n          resources\n        </p>\n      );\n    }\n    return (\n      <p className=\"intro\">\n        We currently dont have the ability to analyse this dataset.\n      </p>\n    );\n  };\n  const [\n    collection,\n    { addToCollection, removeFromCollection },\n  ] = useCurrentCollection();\n\n  const updatedAutomation = domainMetadata?.find(\n    ({ key, value }) => key === 'Update_Automation' && value === 'No',\n  )?.value;\n\n  const updateFrequency = domainMetadata?.find(\n    ({ key }) => key === 'Update_Update-Frequency',\n  )?.value;\n\n  const informationAgency = domainMetadata?.find(\n    ({ key }) => key === 'Dataset-Information_Agency',\n  )?.value;\n\n  return (\n    <div className=\"dataset-page\" key={resource ? resource.id : 'unknown'}>\n      <div className=\"dataset-details\">\n        <section>\n          <Breadcrumb currentPage={resource ? resource.name : '...'} />\n        </section>\n        <section>\n          <h2 className={resource ? '' : 'animate'}>{resource?.name}</h2>\n          <p className={resource ? '' : 'animate'}>{informationAgency}</p>\n          <RawHTML\n            className={resource ? '' : 'animate'}\n            html={resource?.description}\n          />\n          <button\n            type=\"button\"\n            className=\"collection-button\"\n            disabled={!resource}\n            onClick={() =>\n              collection.datasets.includes(datasetID)\n                ? removeFromCollection(collection.id, datasetID)\n                : addToCollection(collection.id, datasetID)\n            }\n          >\n            {collection.datasets.includes(datasetID)\n              ? 'Remove From Collection'\n              : 'Add to Collection'}{' '}\n          </button>\n        </section>\n        <section className=\"external-link\">\n          <p>Powered by</p>\n          <img\n            alt=\"NYC Open Data\"\n            src=\"https://opendata.cityofnewyork.us/wp-content/themes/opendata-wp/assets/img/nyc-open-data-logo.svg\"\n          />\n          <ViewOnOpenPortal permalink={dataset ? dataset?.permalink : '#'} />\n        </section>\n        <section className=\"metadata\">\n          <h2>Metadata</h2>\n          <h3>Update Automation</h3>\n          <p>{updatedAutomation}</p>\n          <h3>Update Frequency</h3>\n          <p>{updateFrequency}</p>\n          <h3>Dataset Owner</h3>\n          <p>{dataset?.owner?.display_name}</p>\n          {informationAgency && (\n            <>\n              <h3>Agency</h3>\n              <p>{informationAgency}</p>\n            </>\n          )}\n          {classification?.domain_category && (\n            <>\n              <h3>Category</h3>\n              <p>{classification.domain_category}</p>\n            </>\n          )}\n          <h3>Updated</h3>\n          <p>{formatDate(resource?.updatedAt)}</p>\n          <h3>Metadata Updated at</h3>\n          <p>{formatDate(resource?.metadata_updated_at)}</p>\n          <h3>Page Views</h3>\n          <p>{pageViews?.page_views_total}</p>\n        </section>\n      </div>\n      <div className=\"dataset-recomendataions\">\n        <h2>Other datasets to consider</h2>\n        <div className=\"tabs\">\n          <button\n            type=\"button\"\n            className={activeTab === 'joins' ? 'active' : ''}\n            onClick={() => setActiveTab('joins')}\n          >\n            Potential Join Columns\n          </button>\n          <button\n            type=\"button\"\n            className={activeTab === 'theme' ? 'active' : ''}\n            onClick={() => setActiveTab('theme')}\n          >\n            Thematically Similar\n          </button>\n        </div>\n        {activeTab === 'joins' &&\n          (!dataset || dataset?.resource?.columns_field_name.length > 0 ? (\n            <>\n              <p className=\"intro\">\n                Find datasets that share a column with the current dataset.\n              </p>{' '}\n              <p>\n                {' '}\n                These columns might be interesting datasets to join with the\n                current dataset to add additional details or bring in context\n              </p>\n              <ColumnMatchTable dataset={dataset} joinColumns={joins} />\n            </>\n          ) : (\n            renderNotFound(dataset, parentDataset)\n          ))}\n        {activeTab === 'theme' && (\n          <>\n            <p>\n              Dataset that are thematically similar based on name and\n              description\n            </p>\n            <div className=\"dataset-recomendataions-theme-list\">\n              {mostSimilarDatasets?.map((d) => (\n                <Dataset\n                  onAddToCollection={() =>\n                    addToCollection(collection.id, d.dataset.resource.id)\n                  }\n                  onRemoveFromCollection={() =>\n                    removeFromCollection(collection.id, d.dataset.resource.id)\n                  }\n                  dataset={d.dataset}\n                  similarity={d.similarity}\n                  inCollection={collection.datasets.includes(\n                    d.dataset.resource.id,\n                  )}\n                />\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\n\nconst copyToClipboard = async (text) => {\n  if (navigator.clipboard) {\n    try {\n      await navigator.clipboard.writeText(text);\n      return true;\n    } catch (e) {\n      // Suppress error and try fallback method\n    }\n  }\n\n  if (\n    document.queryCommandSupported &&\n    document.queryCommandSupported('copy')\n  ) {\n    const textarea = document.createElement('textarea');\n    textarea.style.opacity = '0';\n    textarea.textContent = text;\n    // Prevent scrolling to bottom of page\n    textarea.style.position = 'fixed';\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy');\n    } catch (e) {\n      // Security exception may be thrown by some browsers.\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\n\nexport default (url) => {\n  const [isCopied, setIsCopied] = useState(false);\n\n  const setCopied = async () => {\n    await copyToClipboard(url);\n    setIsCopied(true);\n  };\n  return [isCopied, setCopied];\n};\n","import React from 'react';\nimport './CollectionPage.scss';\nimport {\n    EmailShareButton,\n    FacebookShareButton,\n    TwitterShareButton,\n    EmailIcon,\n    FacebookIcon,\n    TwitterIcon,\n} from 'react-share';\nimport usePageView from '../../hooks/analytics';\nimport useClipboard from '../../hooks/useClipboard';\nimport { useGetDatasetsByIds } from '../../hooks/datasets';\nimport Dataset from '../../components/Dataset/Dataset';\nimport Breadcrumb from '../../components/Breadcrumb/Breadcrumb';\n\nexport default function CollectionPage({ match }) {\n    usePageView();\n    const { name, datasetIDs } = match.params;\n    const url = window.location.href;\n    const datasets = useGetDatasetsByIds(datasetIDs.split(','));\n\n    const [isCopied, setCopied] = useClipboard(url);\n    return (\n        <div className=\"collection-page\">\n            <div className=\"collection-details\">\n                <section>\n                    <Breadcrumb currentPage=\"Collections\" />\n                </section>\n                <section>\n                    <h2>{name}</h2>\n                    <p>\n                        {datasets.length} dataset\n                        {datasets.length > 1 ? 's' : ''}\n                    </p>\n                </section>\n\n                <div>\n                    <h3>Share this collection:</h3>\n                    <p className=\"dataset-url\">{url} </p>\n                    <button type=\"button\" onClick={setCopied}>\n                        Copy link\n                    </button>\n                    <span>{isCopied ? 'Copied!' : ' '} </span>\n                    <p className=\"share-icons\">\n                        <FacebookShareButton url={url}>\n                            <FacebookIcon size={36} />\n                        </FacebookShareButton>{' '}\n                        <TwitterShareButton url={url}>\n                            <TwitterIcon size={36} />\n                        </TwitterShareButton>\n                        <EmailShareButton url={url}>\n                            <EmailIcon size={36} />\n                        </EmailShareButton>\n                    </p>\n                </div>\n            </div>\n            <div className=\"collection-content\">\n                {datasets.map((dataset) => (\n                    <Dataset\n                        viewInOpenPortal\n                        key={dataset.id}\n                        dataset={dataset}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\nimport './AboutPage.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faGithub,\n  faTwitter,\n  faMedium,\n} from '@fortawesome/free-brands-svg-icons';\nimport { ReactComponent as DataClinicSVG } from '../../icons/dataClinicWhite.svg';\nimport usePageView from '../../hooks/analytics';\n\nexport default function AboutPage() {\n  usePageView('/about');\n\n  return (\n    <div className=\"about-page\">\n      <section className=\"about-dark-header\">\n        <div className=\"about-header-full\">\n          <h3>Introducing scout</h3>\n          <h2>Uncover the city&apos;s data.</h2>\n        </div>\n        <div className=\"content\">\n          <div>\n            <p>We built scout to make data more accessible.</p>\n          </div>\n          <div>\n            <p>\n              scout is a new way to browse New York&apos;s open data portal. It\n              focuses on data discoverability, joinability and creating curated\n              collections of datasets that deal with a specific subject.\n            </p>\n            <p>\n              By focusing not on agencies, or departments, scout allows you to\n              quickly identify datasets that are related to each other and can\n              even potentially be joined together using a common ID. Having\n              found these collections of datasets, scout makes it easy to share\n              your findings with others through our data collections.\n            </p>\n          </div>\n        </div>\n      </section>\n      <section className=\"about-section-two-up\">\n        <div className=\"center\">\n          <img src={`${process.env.PUBLIC_URL}/circles.png`} alt=\"\" />\n        </div>\n        <div>\n          <h3>Lots of datasets are lonely</h3>\n          <p>\n            While many open data sets are downloaded and viewed daily, there are\n            many more that get far less attention. We think there is a lot of\n            untapped potential in these datasets, especially when combined with\n            some of the better known ones.\n          </p>\n          <p>\n            Our goal is to make sure that when you search for a dataset, you are\n            exposed to every other dataset that might also be relevant.\n          </p>\n        </div>\n      </section>\n      <section className=\"about-section-two-up dark\">\n        <div>\n          <h3>What is Data Clinic?</h3>\n\n          <p>\n            As the data and tech philanthropic arm of Two Sigma, Data Clinic\n            provides pro bono data science and engineering support to nonprofits\n            and engages in open source tooling and research that contribute to\n            the Data for Good movement.\n          </p>\n          <p>\n            {' '}\n            We leverage Two Sigmas people, data science skills, and\n            technological know-how to support communities, mission driven\n            organizations, and the broader public in their effort to use data\n            more effectively.\n          </p>\n          <p>\n            {' '}\n            To learn more visit{' '}\n            <a\n              href=\"dataclinic.twosigma.com\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              dataclinic.twosigma.com\n            </a>{' '}\n            and connect with us via{' '}\n            <a href=\"mailto:dataclinic@twosigma.com\">dataclinic@twosigma.com</a>\n            .\n          </p>\n        </div>\n        <div className=\"center\">\n          <DataClinicSVG />\n        </div>\n      </section>\n\n      <section className=\"about-section-two-up teal\">\n        <div className=\"social\">\n          <ul>\n            <li>\n              <a\n                href=\"https://github.com/tsdataclinic/scout\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <FontAwesomeIcon icon={faGithub} />\n              </a>\n            </li>\n            <li>\n              <a\n                href=\"https://medium.com/dataclinic\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <FontAwesomeIcon icon={faMedium} />\n              </a>\n            </li>\n            <li>\n              <a\n                href=\"https://twitter.com/tsdataclinic\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                <FontAwesomeIcon icon={faTwitter} />\n              </a>\n            </li>\n          </ul>\n        </div>\n        <div>\n          <h3>How can I contribute?</h3>\n          <p>\n            We want scout to grow to help support the needs of the open data\n            community. That means that we need a lot of voices helping us shape\n            the features we are developing. If you would like to suggest a\n            feature, please either open a ticket on github or reach out to us on\n            one of our social media channels.\n          </p>\n          <p>\n            If you are a developer, designer or want to contribute in a\n            technical capacity we would love your help! Head over to our github\n            page to open issues, suggest features, contribute pull requests and\n            find beginner issues.\n          </p>\n        </div>\n      </section>\n    </div>\n  );\n}\n","import React from 'react';\nimport './CollectionCard.scss';\n\nimport { formatDate } from '../../utils/formatters';\n\nexport default function CollectionCard({ collection }) {\n  return (\n    <div className=\"collection-card\">\n      <p className=\"created-at\">\n        Collection created {formatDate(collection.createdAt)}\n      </p>\n      <h3>{collection.name}</h3>\n      <div className=\"collection-stats\">\n        <span>Datasets: {collection.datasets.length}</span>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLayerGroup } from '@fortawesome/free-solid-svg-icons';\nimport { Link } from 'react-router-dom';\nimport CollectionCard from '../../components/CollectionCard/CollectionCard';\nimport { useCollections } from '../../hooks/collections';\nimport './CollectionsPage.scss';\nimport { constructCollectionLink } from '../../utils/formatters';\nimport usePageView from '../../hooks/analytics';\n\nexport default function CollectionsPage() {\n    usePageView();\n    const [{ collections }] = useCollections();\n    const nonPendingCollections = collections.filter((c) => c.id !== 'pending');\n\n    return (\n        <div className=\"collections-page\">\n            <div className=\"collections-header\">\n                <h2>My Collections</h2>\n                <p>{nonPendingCollections.length} Collections</p>\n            </div>\n\n            {nonPendingCollections.length == 0 && (\n                <div className=\"no-collections\">\n                    <div className=\"collection-icon\">\n                        <FontAwesomeIcon icon={faLayerGroup} />\n                    </div>\n                    <h3>No Collections found</h3>\n                    <p>\n                        Select 'Add to Collection' on datasets to begin creating\n                        local connections\n                    </p>\n                    <div className=\"what-are-collections\">\n                        <h3>What are Collections?</h3>\n                        <p>\n                            Collections allow you to group, save and share\n                            similar datasets. Collections are saved locally - to\n                            share your Collection use the share url. If a\n                            dataset updates on the open data portal, it will\n                            also update within your collection\n                        </p>\n                    </div>\n                </div>\n            )}\n            {nonPendingCollections.length > 0 && (\n                <div className=\"collections-list\">\n                    <ul>\n                        {nonPendingCollections.map((collection) => (\n                            <li>\n                                <Link to={constructCollectionLink(collection)}>\n                                    <CollectionCard collection={collection} />\n                                </Link>\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n            )}\n        </div>\n    );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useCurrentCollection } from '../../hooks/collections';\nimport { useGetDatasetsByIds } from '../../hooks/datasets';\nimport './CreateCollectionModal.scss';\n\nexport default function CreateCollectionModal() {\n    const [collection, { clearCollection, setName }] = useCurrentCollection();\n    const datasets = useGetDatasetsByIds(collection.datasets);\n\n    return (\n        <div className=\"create-collection-modal\">\n            <h3>Create collection with the following datasets</h3>\n            <ul>\n                {datasets.map((dataset) => (\n                    <li>{dataset.resource.name}</li>\n                ))}\n            </ul>\n            <input\n                type=\"text\"\n                placeholder=\"Name\"\n                value={collection.name}\n                onChange={(e) => setName(e.target.value)}\n            />\n            <Link\n                to={`/collection/${collection.name}/${collection.datasets.join(\n                    ',',\n                )}`}\n            >\n                <button type=\"submit\" onClick={clearCollection}>\n                    Create\n                </button>\n            </Link>\n        </div>\n    );\n}\n","import React from 'react';\nimport './WelcomeModal.scss';\nimport { Modal } from 'react-router-modal';\nimport useSeenWelcome from '../../hooks/useSeenWelcome';\n\nexport default function WelcomeModal() {\n  const [seenWelcome, loaded, setSeenWelcome] = useSeenWelcome();\n  const recordDismiss = () => {\n    setSeenWelcome();\n  };\n\n  return (\n    !seenWelcome &&\n    loaded && (\n      <Modal onBackdropClick={recordDismiss}>\n        <div className=\"welcome-modal\">\n          <h2>Welcome to Scout!</h2>\n          <p>\n            Thanks for trying Scout. Scout is a new way to browse open data\n            portals. It is built with discoverability in mind. To learn more,\n            click the about button. To get started, try searching for a dataset\n            or select a dataset to see recomendations.\n          </p>\n\n          <p>\n            You can also create collections of datasets which you can share with\n            others. To do so start collecting or click on the collections tab\n          </p>\n        </div>\n      </Modal>\n    )\n  );\n}\n","import { useEffect, useState } from 'react';\n\nexport default function useSeenWelcome() {\n    const [seenWelcome, setSeenWelcome] = useState(false);\n    const [loaded, setLoaded] = useState(false);\n\n    useEffect(() => {\n        setSeenWelcome(window.localStorage.getItem('seenWelcome'));\n        setLoaded(true);\n    }, []);\n    const aknowledgeSeenWelcome = () => {\n        setSeenWelcome(true);\n        window.localStorage.setItem('seenWelcome', true);\n    };\n    return [seenWelcome, loaded, aknowledgeSeenWelcome];\n}\n","import React, { useEffect, useState } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nexport default function GHPagesRedirect() {\n  const [redirect, setRedirect] = useState(null);\n  useEffect(() => {\n    // This is for dealing with the 404 redirect issue on gh pages\n    const target = sessionStorage.redirect;\n    delete sessionStorage.redirect;\n\n    if (target && target !== window.location.href) {\n      let to = target;\n      if (process.env.PUBLIC_URL) {\n        to = `/${to\n          .split('/')\n          .slice(4)\n          .join('/')}`;\n      }\n      setRedirect(to);\n    }\n  }, []);\n\n  if (redirect) {\n    return <Redirect to={redirect} />;\n  }\n  return <></>;\n}\n","import React from 'react';\nimport './App.scss';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch,\n} from 'react-router-dom';\nimport { ModalContainer, ModalRoute } from 'react-router-modal';\n\nimport SideNav from './components/SideNav/SideNav';\nimport HomePage from './layout/HomePage/HomePage';\nimport DatasetPage from './layout/DatasetPage/DatasetPage';\nimport CollectionPage from './layout/CollectionPage/CollectionPage';\nimport AboutPage from './layout/AboutPage/AboutPage';\nimport CollectionsPage from './layout/CollectionsPage/CollectionsPage';\nimport CreateCollectionModal from './components/CreateCollectionModal/CreateCollectionModal';\nimport WelcomeModal from './components/WelcomeModal/WelcomeModal';\nimport GHPagesRedirect from './components/GHPagesRedirect/GHPagesRedirect';\n\nimport 'react-router-modal/css/react-router-modal.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router basename={process.env.PUBLIC_URL}>\n        <ModalContainer />\n        <SideNav />\n        <div className=\"content\">\n          <Switch>\n            <Route path=\"/dataset/:datasetID\" component={DatasetPage} />\n            <Route\n              path=\"/collection/:name/:datasetIDs\"\n              component={CollectionPage}\n            />\n\n            <Route path=\"/about\" component={AboutPage} />\n            <Route path=\"/collections\" component={CollectionsPage} />\n\n            <ModalRoute\n              path=\"/collection/new\"\n              parentPath=\"/\"\n              component={CreateCollectionModal}\n            />\n            <Route path=\"/\" component={HomePage} />\n            <Redirect from=\"/\" to=\"/\" />\n          </Switch>\n        </div>\n        <GHPagesRedirect />\n        <WelcomeModal />\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      // eslint-disable-next-line no-param-reassign\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'normalize.css'; // Ensure consistent layout across browsers\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { StateProvider } from './contexts/OpenDataContext';\nimport { CollectionsProvider } from './contexts/CollectionsContext';\nimport { SearchProvider } from './contexts/SearchContext';\n\nReactDOM.render(\n  <StateProvider>\n    <SearchProvider>\n      <CollectionsProvider>\n        <App />\n      </CollectionsProvider>\n    </SearchProvider>\n  </StateProvider>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}