(this["webpackJsonpnew-york-open-data-explorer"]=this["webpackJsonpnew-york-open-data-explorer"]||[]).push([[0],{29:function(e,t,a){},48:function(e,t,a){e.exports=a(99)},55:function(e,t,a){},65:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(38),l=a.n(r),o=(a(53),a(54),a(55),a(6)),i=a(14),s=a(20),u=a(1);a(65);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var f=c.a.createElement("path",{d:"M26,22a3.86,3.86,0,0,0-2,.57l-3.09-3.1a6,6,0,0,0,0-6.94L24,9.43A3.86,3.86,0,0,0,26,10a4,4,0,1,0-4-4,3.86,3.86,0,0,0,.57,2l-3.1,3.09a6,6,0,0,0-6.94,0L9.43,8A3.86,3.86,0,0,0,10,6a4,4,0,1,0-4,4,3.86,3.86,0,0,0,2-.57l3.09,3.1a6,6,0,0,0,0,6.94L8,22.57A3.86,3.86,0,0,0,6,22a4,4,0,1,0,4,4,3.86,3.86,0,0,0-.57-2l3.1-3.09a6,6,0,0,0,6.94,0L22.57,24A3.86,3.86,0,0,0,22,26a4,4,0,1,0,4-4ZM16,20a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z"}),E=function(e){var t=e.svgRef,a=e.title,n=d(e,["svgRef","title"]);return c.a.createElement("svg",m({focusable:"false",preserveAspectRatio:"xMidYMid meet",style:{willChange:"transform"},width:32,height:32,viewBox:"0 0 32 32","aria-hidden":"true",ref:t},n),a?c.a.createElement("title",null,a):null,f)},p=c.a.forwardRef((function(e,t){return c.a.createElement(E,m({svgRef:t},e))}));a.p;function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var b=c.a.createElement("path",{d:"M26 6v4H6V6H26m0-2H6A2 2 0 0 0 4 6v4a2 2 0 0 0 2 2H26a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zM10 16V26H6V16h4m0-2H6a2 2 0 0 0-2 2V26a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM26 16V26H16V16H26m0-2H16a2 2 0 0 0-2 2V26a2 2 0 0 0 2 2H26a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2z"}),g=function(e){var t=e.svgRef,a=e.title,n=h(e,["svgRef","title"]);return c.a.createElement("svg",v({focusable:"false",preserveAspectRatio:"xMidYMid meet",style:{willChange:"transform"},width:32,height:32,viewBox:"0 0 32 32","aria-hidden":"true",ref:t},n),a?c.a.createElement("title",null,a):null,b)},O=c.a.forwardRef((function(e,t){return c.a.createElement(g,v({svgRef:t},e))}));a.p;function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var C=c.a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M61.8297361,383.0173 C64.003338,384.980686 65.6503671,389.264692 64.9958636,393.681256 C63.9028059,401.057166 56.8413572,406.042444 49.2586679,404.731167 C46.4025566,404.237083 42.3627381,401.908323 40.3460271,398.57871 C38.5309871,395.582059 38.3605131,393.546432 38.3445334,391.68581 L38.3445334,391.68581 L38.3428849,391.071007 L49.9160871,391.066082 C52.9183041,390.974798 55.7552526,389.639352 56.8413572,388.95355 C58.9628323,387.613981 61.1695602,384.517339 61.8297361,383.0173 Z M31.4640829,352.26879 C40.4585147,350.682829 49.0585805,356.270862 51.3939881,364.922464 L51.3939881,364.922464 L36.4663353,364.922464 L36.4663353,386.893019 C27.3490294,387.931132 18.8837548,381.700688 17.2687903,372.541769 C15.5904836,363.023619 21.9459326,353.947097 31.4640829,352.26879 Z M60.385413,364.235185 C62.4852808,364.235185 64.601753,365.299916 66.011064,366.866044 C67.3969088,368.406096 68.1714653,370.474554 68.1714653,372.208809 C68.1714653,374.253167 67.391756,375.700926 66.7289589,376.652666 C66.1118397,377.538814 64.6051395,379.243661 62.7796187,379.818356 C62.7796187,377.490068 63.2010054,374.997718 61.0380823,371.124996 C59.7411451,368.802826 56.9653724,366.912254 55.7593284,366.159617 L55.7593284,366.159617 L55.280758,365.8693 C56.4250547,365.026901 57.8483036,364.235185 60.385413,364.235185 Z",transform:"translate(-17 -352)"}),N=function(e){var t=e.svgRef,a=e.title,n=j(e,["svgRef","title"]);return c.a.createElement("svg",y({width:52,height:53,viewBox:"0 0 52 53",preserveAspectRatio:"xMidYMid meet",ref:t},n),a?c.a.createElement("title",null,a):null,C)},w=c.a.forwardRef((function(e,t){return c.a.createElement(N,y({svgRef:t},e))})),T=(a.p,a(4)),_=a(22),k=a.n(_),S=a(2),A=a(23),L=a(12),D=a(13),R=a.n(D),M="https://api.us.socrata.com/api/catalog/v1?domains=data.cityofnewyork.us&search_context=data.cityofnewyork.us";function x(e){var t,a=arguments;return R.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:100,n.abrupt("return",fetch("".concat(M,"&offset=").concat(e*t,"&limit=").concat(t)).then((function(e){return e.json()})));case 2:case"end":return n.stop()}}))}function I(e){return new Set([].concat(Object(T.a)(e.resource.columns_name.map((function(e){return e.toLocaleLowerCase()}))),Object(T.a)(e.resource.columns_field_name.map((function(e){return e.toLocaleLowerCase()})))))}function P(e,t){var a=I(t),n=new Set(Object(T.a)(e).filter((function(e){return a.has(e)})));return Array.from(n)}function F(e,t){return fetch("https://data.cityofnewyork.us/resource/".concat(e.resource.id,".json?$select=distinct ").concat(t.replace(/ /g,"_"))).then((function(e){return e.json()})).then((function(a){return a.errorCode||a.error?(console.warn("Failed to load unique entries for dataset ",e," column ",t),[]):a.map((function(e){return Object.values(e)[0]}))}))}var U=new A.a("SocrataCache");U.version(1).stores({SocrataCache:"id"});var V=Object(n.createContext)(),H={datasets:[],tagList:[],categories:[],departments:[],columns:[],stateLoaded:!1},B=function(e,t){var a=t.type,n=t.payload;switch(a){case"UPDATE_OPEN_DATASET_MANIFEST":return Object(S.a)({},e,{datasets:n});case"UPDATE_TAGS":return Object(S.a)({},e,{tagList:n});case"UPDATE_CATEGORIES":return Object(S.a)({},e,{categories:n});case"UPDATE_COLUMNS":return Object(S.a)({},e,{columns:n});case"UPDATE_DEPARTMENTS":return Object(S.a)({},e,{departments:n});case"HYDRATE_STATE":return Object(S.a)({},e,{},n);case"SET_LOADED":return Object(S.a)({},e,{stateLoaded:!0});default:return e}},W=function(){return Object(n.useContext)(V)};function Y(){var e=W();return Object(u.a)(e,1)[0].stateLoaded}function G(e){var t=W(),a=Object(u.a)(t,1)[0].datasets;return Object(n.useMemo)((function(){return e?function(e,t){var a=I(e);return t.map((function(e){return{dataset:e,joinableColumns:P(a,e)}})).filter((function(t){return t.joinableColumns.length>0&&t.dataset.resource.id!==e.resource.id}))}(e,a):[]}),[e,a])}function z(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),c=a[0],r=a[1],l=W(),o=Object(u.a)(l,1)[0].datasets;return Object(n.useEffect)((function(){fetch("".concat("/scout","/similarity_metrics.json")).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),Object(n.useMemo)((function(){return c[e]&&o&&o.length>0?c[e].map((function(e){return{similarity:e.similarity,dataset:o.find((function(t){return t.resource.id===e.dataset}))}})):[]}),[c,e,o])}function q(e){var t=W();return Object(u.a)(t,1)[0].datasets.find((function(t){return t.resource.id===e}))}function J(e){var t=W(),a=Object(u.a)(t,1)[0].datasets;return Object(n.useMemo)((function(){return a.filter((function(t){return e.includes(t.resource.id)}))}),[a,e])}var Z=a(41),K=a.n(Z),$=Object(n.createContext)(),Q={collections:[{id:"pending",datasets:[],name:"pending"}],activeCollectionID:"pending"},X=new A.a("CollectionCache");X.version(1).stores({CollectionCache:"id"});var ee=function(e,t){var a=t.type,n=t.payload;switch(a){case"SET_ACTIVE_COLLECTION":return Object(S.a)({},e,{activeCollectionID:n});case"CREATE_COLLECTION_FROM_PENDING":return Object(S.a)({},e,{collections:[].concat(Object(T.a)(e.collections),[Object(S.a)({},e.collections.find((function(e){return"pending"===e.id})),{id:n.id,createdAt:new Date,name:n.name})]).map((function(e){return"pending"===e.id?{id:"pending",datasets:[],name:"pending"}:e}))});case"ADD_TO_COLLECTION":return Object(S.a)({},e,{collections:e.collections.map((function(e){return e.id===n.id?Object(S.a)({},e,{datasets:[].concat(Object(T.a)(e.datasets),[n.datasetID])}):e}))});case"REMOVE_FROM_COLLECTION":return Object(S.a)({},e,{collections:e.collections.map((function(e){return e.id===n.id?Object(S.a)({},e,{datasets:e.datasets.filter((function(e){return e!==n.datasetID}))}):e}))});case"SET_NAME":return Object(S.a)({},e,{collections:[].concat(Object(T.a)(e),[e.collections.map((function(e){return e.id===n.id?Object(S.a)({},e,{name:n.name}):e}))])});case"CLEAR_COLLECTION":return Object(S.a)({},e,{collections:[].concat(Object(T.a)(e),[e.collections.map((function(e){return e.id===n.id?Object(S.a)({},e,{datasets:[]}):e}))])});case"DELETE_COLLECTION":return Object(S.a)({},e,{collections:e.collections.filter((function(e){return e.id!==n.id}))});case"HYDRATE_STATE":return Object(S.a)({},e,{},n);default:return e}},te=function(){return Object(n.useContext)($)};function ae(){var e=te(),t=Object(u.a)(e,2),a=t[0],n=t[1],c=a.activeCollectionID,r=a.pendingCollection;return[c?a.collections.find((function(e){return e.id===a.activeCollectionID})):r,{clearCollection:function(e){n({type:"CLEAR_COLLECTION",payload:{id:e}})},addToCollection:function(e,t){n({type:"ADD_TO_COLLECTION",payload:{id:e,datasetID:t}})},removeFromCollection:function(e,t){return n({type:"REMOVE_FROM_COLLECTION",payload:{id:e,datasetID:t}})},setName:function(e,t){return n({type:"SET_NAME",payload:{id:t,name:e}})},createCollectionFromPending:function(e){var t=K()();n({type:"CREATE_COLLECTION_FROM_PENDING",payload:{name:e,id:t}}),n({type:"SET_ACTIVE_COLLECTION",payload:t})}}]}function ne(){var e=te(),t=Object(u.a)(e,2),a=t[0],n=t[1];return[a,{deleteCollection:function(e){n({type:"DELETE_COLLECTION",payload:e})},setActiveCollection:function(e){n({type:"SET_ACTIVE_COLLECTION",payload:e})}}]}a(71);function ce(e){var t=e.visible,a=e.onDismiss,r=ne(),l=Object(u.a)(r,2),i=l[0].collections,s=l[1].setActiveCollection,m=ae(),d=Object(u.a)(m,2),f=d[0],E=d[1],p=E.removeFromCollection,v=E.createCollectionFromPending,h=J(f.datasets),b=Object(n.useState)(""),g=Object(u.a)(b,2),O=g[0],y=g[1],j=Object(n.useState)("add"),C=Object(u.a)(j,2),N=C[0],w=C[1],T=function(e){var t,a;return null===e||void 0===e?void 0:null===(t=e.classification.domain_metadata)||void 0===t?void 0:null===(a=t.find((function(e){return"Dataset-Information_Agency"===e.key})))||void 0===a?void 0:a.value};return t?c.a.createElement("div",{className:"collection-tab"},"create"===N&&c.a.createElement("div",{className:"collections-tab-create"},c.a.createElement("h2",null,"Create Collection"),c.a.createElement("div",{className:"collections-tab-create-options"},c.a.createElement("p",null,"Name your new collection"),c.a.createElement("input",{placeholder:"name",type:"text",value:O,onChange:function(e){return y(e.target.value)}}),"pending"===f.id&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"With datasets:"),c.a.createElement("ul",null,h.map((function(e){return c.a.createElement("li",{className:"collection-tab-dataset"},c.a.createElement("div",null,c.a.createElement("p",{className:"name"},e.resource.name),c.a.createElement("p",{className:"agency"}," ",T(e))))})))))),"add"===N&&c.a.createElement("div",{className:"add-to-collection"},c.a.createElement("div",{className:"add-to-header"},"pending"!==f.id?c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Currently adding to"),c.a.createElement("p",{className:"collection-name"},f.name)):c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Create a new dataset form selection")),i.length>2&&c.a.createElement("button",{type:"button",onClick:function(){return w("switch")}},"Switch Collection")),c.a.createElement("div",{className:"collection-tab-current-collection"},0===h.length?c.a.createElement("div",{className:"datasets-placeholder"},c.a.createElement("h3",null,"pending"===f.id?"No datasets selected":"This collection is empty"),c.a.createElement("p",null,'Select `"`Add to Collection`"` to begin creating local collections.')):c.a.createElement("ul",null,h.map((function(e){return c.a.createElement("li",{key:e.resource.name,className:"collection-tab-dataset"},c.a.createElement("div",null,c.a.createElement("p",{className:"name"},e.resource.name),c.a.createElement("p",{className:"agency"},T(e))),c.a.createElement("button",{type:"button",onClick:function(){return p(f.id,e.resource.id)}},"Remove"))}))))),"switch"===N&&c.a.createElement("div",{className:"collections-tab-switch"},c.a.createElement("div",{className:"switch-header"},c.a.createElement("h3",null,"Select a Collection to add to")),1===i.length?c.a.createElement("div",{className:"datasets-placeholder"},c.a.createElement("h3",null,"No collections yet")):c.a.createElement("ul",{className:"existing-collections-list"},i.filter((function(e){return"pending"!==e.id})).map((function(e){return c.a.createElement("li",{className:"existing-collection"},c.a.createElement("div",{className:"exisiting-colections-deets"},c.a.createElement("button",{type:"button",className:"select-collection-button",onClick:function(){return t=e.id,s(t),void w("add");var t}},c.a.createElement("p",{className:"name"},e.name),c.a.createElement("p",{className:"dataset-count"}," ",e.datasets.length," datasets"," "))))})))),"create"===N&&c.a.createElement("div",{className:"collection-tab-buttons"},c.a.createElement("button",{type:"submit",onClick:function(){v(O),w("add")}},"Create"),c.a.createElement("button",{type:"button",onClick:function(){return w("add")}},"Cancel")),"add"===N&&c.a.createElement("div",{className:"collection-tab-buttons"},c.a.createElement("button",{type:"submit",onClick:function(){return w("create")}},"Create Collection"),c.a.createElement(o.Link,{to:"/collections"},c.a.createElement("button",{onClick:a,type:"submit"},"My Collections")))):""}function re(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1],l=ae(),i=Object(u.a)(l,1)[0];return c.a.createElement("nav",{className:"side-nav"},c.a.createElement(o.Link,{alt:"Data Clinic",className:"title",to:"/"},c.a.createElement("h2",{className:"scout-h2"},"scout"),c.a.createElement("p",{className:"scout-sub"},"by data clinic")),c.a.createElement(o.NavLink,{activeClassName:"active-nav",alt:"Explore",className:"explore",exact:!0,to:"/"},c.a.createElement(p,null),c.a.createElement("h1",null,"Explore")),c.a.createElement("div",{className:"collections-button",style:{position:"relative"}},i.datasets.length>0&&c.a.createElement("div",{className:"collection-counter"},i.datasets.length),c.a.createElement("button",{onClick:function(){return r(!a)},type:"button",className:"header-button"},c.a.createElement(O,null),c.a.createElement("h1",null,"Collections")),c.a.createElement(ce,{visible:a,onDismiss:function(){return r(!1)}})),c.a.createElement(o.NavLink,{exact:!0,activeClassName:"active-nav",alt:"about",className:"about",to:"/about"},c.a.createElement(w,null),c.a.createElement("h1",null,"About")))}a(72);var le=a(42),oe=a(5),ie=a(7),se=(a(75),a(43)),ue=a.n(se);function me(e){var t=e.html,a=e.className,n=ue.a.sanitize(t);return c.a.createElement("div",{className:a,dangerouslySetInnerHTML:{__html:n}})}function de(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function fe(e,t){if(t){var a=new RegExp("(".concat(t,")"),"ig");return c.a.createElement(me,{html:e.replace(a,(function(e){return'<span class="hilight">'.concat(e,"</span>")}))})}return e}function Ee(e){return"/collection/".concat(e.name,"/").concat(e.datasets.join(","))}function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ve(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var he=c.a.createElement("defs",null,c.a.createElement("rect",{id:"joinable-a",width:6,height:16,x:8,y:0}),c.a.createElement("mask",{id:"joinable-b",width:6,height:16,x:0,y:0,fill:"#fff",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox"},c.a.createElement("use",{xlinkHref:"#joinable-a"}))),be=c.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#1C4D5E"},c.a.createElement("rect",{width:5,height:15,x:.5,y:.5}),c.a.createElement("use",{strokeDasharray:"2 2",strokeWidth:2,mask:"url(#joinable-b)",xlinkHref:"#joinable-a"})),ge=function(e){var t=e.svgRef,a=e.title,n=ve(e,["svgRef","title"]);return c.a.createElement("svg",pe({width:14,height:16,viewBox:"0 0 14 16",ref:t},n),a?c.a.createElement("title",null,a):null,he,be)},Oe=c.a.forwardRef((function(e,t){return c.a.createElement(ge,pe({svgRef:t},e))}));a.p;function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function je(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var Ce=c.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#1C4D5E"},c.a.createElement("path",{d:"M12.0010147,2 C14.0927599,3.21047734 15.5,5.47236816 15.5,8.06293752 C15.5,10.6535069 14.0927599,12.9153977 12.0010147,14.125875 C9.90763242,12.9160283 8.5,10.653868 8.5,8.06293752 C8.5,5.50992312 9.86673488,3.27612674 11.9084482,2.05330481 L12.0010147,2 Z M8.68122745,8.58205248 L13.498517,3.76476294 M9.2972735,10.9660064 L14.70139,5.56188997 M10.4825147,12.8052417 L15.3419124,7.94584391"}),c.a.createElement("path",{d:"M16,0.5 C14.634207,0.5 13.3536098,0.864916567 11.7507242,1.5036895 C10.6474352,0.865224382 9.36635521,0.5 8,0.5 C5.92893219,0.5 4.05393219,1.33946609 2.69669914,2.69669914 C1.33946609,4.05393219 0.5,5.92893219 0.5,8 C0.5,10.0710678 1.33946609,11.9460678 2.69669914,13.3033009 C4.05393219,14.6605339 5.92893219,15.5 8,15.5 C9.36630099,15.5 10.6473408,15.1348186 12.250213,14.4968528 C13.3532903,15.1349825 14.6340316,15.5 16,15.5 C18.0710678,15.5 19.9460678,14.6605339 21.3033009,13.3033009 C22.6605339,11.9460678 23.5,10.0710678 23.5,8 C23.5,5.92893219 22.6605339,4.05393219 21.3033009,2.69669914 C19.9460678,1.33946609 18.0710678,0.5 16,0.5 Z"})),Ne=function(e){var t=e.svgRef,a=e.title,n=je(e,["svgRef","title"]);return c.a.createElement("svg",ye({width:24,height:16,viewBox:"0 0 24 16",ref:t},n),a?c.a.createElement("title",null,a):null,Ce)},we=c.a.forwardRef((function(e,t){return c.a.createElement(Ne,ye({svgRef:t},e))})),Te=(a.p,function(e){var t=e.permalink;return c.a.createElement("a",{className:"external-link",target:"_blank",rel:"noopener noreferrer",href:t},c.a.createElement("button",{type:"button"},"View on Open Data\xa0",c.a.createElement(oe.a,{icon:ie.d})))});function _e(e){var t=e.dataset,a=e.onAddToCollection,r=e.onRemoveFromCollection,l=e.inCollection,i=e.viewInOpenPortal,s=void 0!==i&&i,m=e.similarity,d=e.query,f=fe(t.resource.name,d),E=z(t.resource.id),p=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){fetch("".concat("/scout","/potential_join_numbers.json")).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),e in c?c[e]:0}(t.resource.id),v=fe(t.resource.description,d);return c.a.createElement("div",{className:"dataset",key:t.resource.id},c.a.createElement("div",{className:"dataset-title"},c.a.createElement("p",null,t.resource.attribution),c.a.createElement(o.Link,{className:"title",to:"/dataset/".concat(t.resource.id)},c.a.createElement("h2",null,f))),a&&c.a.createElement("button",{type:"button",onClick:function(){return l?r(t.resource.id):a(t.resource.id)}},l?"Remove from collection":"Add to collection"),m&&c.a.createElement("p",{className:"similarity"},c.a.createElement("p",{className:"header"},"Similarity"),c.a.createElement("p",null,(100*m).toPrecision(2),"%")),s&&c.a.createElement(Te,{permalink:t.permalink}),c.a.createElement("div",{className:"comparison-stats"},c.a.createElement("div",{className:"comparison-stat dataset-join-thematic"},c.a.createElement(Oe,null),c.a.createElement("span",null,Math.max(E.length-1,0))),c.a.createElement("div",{className:"comparison-stat dataset-join-join"},c.a.createElement(we,null),c.a.createElement("span",null,p))),c.a.createElement("div",{className:"dataset-description"},v),c.a.createElement("div",{className:"dataset-meta"},c.a.createElement("div",{className:"update-frequency"},c.a.createElement("span",null,"Update frequency:"),"weekly"),c.a.createElement("div",{className:"dataset-last-updated"},c.a.createElement("span",null,"Last Update at:"),de(t.resource.updatedAt))))}a(76);function ke(e){var t=e.options,a=e.selected,r=e.direction,l=e.onSelected,o=e.onDirection,i=Object(n.useState)(!1),s=Object(u.a)(i,2),m=s[0],d=s[1];return c.a.createElement("div",{className:"sort-menu ".concat(m?"expanded":"")},c.a.createElement("div",{className:"wrapper"},c.a.createElement("span",null,"Sort By:"),c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return d(!m)}},a),t.filter((function(e){return e!==a})).map((function(e){return c.a.createElement("li",{onClick:function(){l(e),d(!1)},key:e},e," ")}))),c.a.createElement(oe.a,{onClick:function(){return o("asc"===r?"desc":"asc")},icon:"asc"===r?ie.h:ie.g})))}a(77),a(29);var Se=function(){return c.a.createElement("div",{className:"datasets-loading"},Object(T.a)(Array(4)).map((function(e,t){return c.a.createElement("div",{key:t,className:"dataset"},c.a.createElement("div",{className:"dataset-title animate"}),c.a.createElement("p",{className:"dataset-description animate"}),c.a.createElement("div",{className:"dataset-meta animate"}))})))},Ae=a(44),Le=a.n(Ae);function De(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=Object(n.useMemo)((function(){return Math.ceil(e.length/t)}),[e,t]),r=Object(n.useState)(0),l=Object(u.a)(r,2),o=l[0],i=l[1];Object(n.useEffect)((function(){i(0)}),[a]);var s=c.a.createElement("nav",null,c.a.createElement(Le.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:a,onPageChange:function(e){var t=e.selected;i(t)},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",previousClassName:"page-item",nextClassName:"page-item",pageClassName:"page-item"})),m=e.slice(o*t,(o+1)*t);return[m,{pageButtons:s}]}function Re(e,t){Object(n.useEffect)((function(){var t=e||window.location.pathname;window.fathom("trackPageview",{path:t})}),[e])}a(81);var Me=function(){return c.a.createElement("div",{className:""},c.a.createElement("div",{className:"filter-loading-wrapper"},Object(T.a)(Array(10)).map((function(e,t){return c.a.createElement("li",{key:t,className:"multi-buttons"},c.a.createElement("input",{type:"checkbox",disabled:!0,className:"checkbox"}),c.a.createElement("span",{className:"animate item-name"}),c.a.createElement("span",{className:"animate pill"}))}))))};a(82);function xe(e){var t=e.items,a=e.selected,r=e.onChange,l=e.title,o=e.collapse,i=e.onCollapse,s=Object(n.useState)(!0),m=Object(u.a)(s,2),d=m[0],f=m[1],E=null===o?d:o,p=Y(),v=Object(n.useState)(""),h=Object(u.a)(v,2),b=h[0],g=h[1],O=Object(n.useMemo)((function(){return t&&Object.keys(t)}),[t]),y=k()({data:O.map((function(e){return{name:e}})),options:{keys:["name"],shouldSort:!1,findAllMatches:!0,caseSensitive:!1}}),j=y.result,C=y.search;Object(n.useEffect)((function(){return C(b)}),[C,b]);var N=De(Object(n.useMemo)((function(){return null===j||void 0===j?void 0:j.map((function(e){return e.name})).sort((function(e,a){return t[e]<t[a]?1:-1}))}),[j,t]),10),w=Object(u.a)(N,2),_=w[0],S=w[1].pageButtons;return c.a.createElement("div",{className:"mutli-selector"},c.a.createElement("h2",null,c.a.createElement("button",{className:"header-button",type:"button",onClick:function(){i?i(!E):f(!E)}},l," ",c.a.createElement("span",null," ",E?"+":"-")," ")),!E&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search"},c.a.createElement("input",{disabled:!p,placeholder:"filter",value:b,onChange:function(e){return g(e.target.value)}})),c.a.createElement("ul",{className:"multi-list"},p?_.map((function(e){return c.a.createElement("li",{key:e,onClick:function(){return function(e){var t=a.includes(e)?a.filter((function(t){return t!==e})):[].concat(Object(T.a)(a),[e]);r(t)}(e)},className:"multi-buttons ".concat(a&&a.includes(e)?"selected":"")},c.a.createElement("input",{type:"checkbox",checked:a&&a.includes(e),className:"checkbox"}),c.a.createElement("span",{className:"item-name"},e),c.a.createElement("span",{className:"pill"},t[e]))})):c.a.createElement(Me,null)),S,a&&a.length>0&&c.a.createElement("button",{type:"button",onClick:function(){r([])}},"clear")))}var Ie=Object(n.createContext)(),Pe={term:"",tags:[],categories:[],departments:[],columns:[],sortVariable:"name",sortOrder:"asc",collapseFilters:!0,collapsedFilterList:{categories:!0,tags:!0,departments:!0,columns:!0}},Fe=function(e,t){var a=t.type,n=t.payload;switch(a){case"ADD_TAG":return Object(S.a)({},e,{tags:[].concat(Object(T.a)(e.tags),[n])});case"REMOVE_TAG":return Object(S.a)({},e,{tags:e.tags.filter((function(e){return e!==n}))});case"ADD_CATEGORY":return Object(S.a)({},e,{categories:[].concat(Object(T.a)(e.categories),[n])});case"REMOVE_CATEGORY":return Object(S.a)({},e,{category:e.category.filter((function(e){return e!==n}))});case"ADD_COLUMN":return Object(S.a)({},e,{columns:[].concat(Object(T.a)(e.columns),[n])});case"REMOVE_COLUMN":return Object(S.a)({},e,{columns:e.columns.filter((function(e){return e!==n}))});case"ADD_DEPARTMNET":return Object(S.a)({},e,{departments:[].concat(Object(T.a)(e.departments),[n])});case"REMOVE_DEPARTMENT":return Object(S.a)({},e,{departments:e.departments.filter((function(e){return e!==n}))});case"CLEAR":return Pe;case"SET_TAGS":return Object(S.a)({},e,{tags:n});case"SET_DEPARTMENTS":return Object(S.a)({},e,{departments:n});case"SET_CATEGORIES":return Object(S.a)({},e,{categories:n});case"SET_COLUMNS":return Object(S.a)({},e,{columns:n});case"SET_SORT_ORDER":return Object(S.a)({},e,{sortOrder:n});case"SET_COLLAPSE_FILTER_BAR":return Object(S.a)({},e,{collapseFilters:n});case"SET_FILTER_STATE":return Object(S.a)({},e,{collapsedFilterList:Object(S.a)({},e.collapsedFilterList,Object(L.a)({},n.filter,n.state))});case"SET_SORT_VARIABLE":return Object(S.a)({},e,{sortVariable:n});case"SET_TERM":return Object(S.a)({},e,{term:n});default:return e}},Ue=function(){return Object(n.useContext)(Ie)};function Ve(){Re();var e=function(){var e=W();return Object(u.a)(e,1)[0].categories}(),t=function(){var e=W();return Object(u.a)(e,1)[0].tagList}(),a=function(){var e=W();return Object(u.a)(e,1)[0].departments}(),r=function(){var e=W();return Object(u.a)(e,1)[0].columns}(),l=Y(),o=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].tags,n=t[1];return[a,function(e){n({type:"SET_TAGS",payload:e})}]}(),i=Object(u.a)(o,2),s=i[0],m=i[1],d=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].columns,n=t[1];return[a,function(e){n({type:"SET_COLUMNS",payload:e})}]}(),f=Object(u.a)(d,2),E=f[0],p=f[1],v=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].categories,n=t[1];return[a,function(e){n({type:"SET_CATEGORIES",payload:e})}]}(),h=Object(u.a)(v,2),b=h[0],g=h[1],O=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].departments,n=t[1];return[a,function(e){n({type:"SET_DEPARTMENTS",payload:e})}]}(),y=Object(u.a)(O,2),j=y[0],C=y[1],N=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].term,n=t[1];return[a,function(e){n({type:"SET_TERM",payload:e})}]}(),w=Object(u.a)(N,2),_=w[0],S=w[1],A=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].sortVariable,n=t[1];return[a,function(e){n({type:"SET_SORT_VARIABLE",payload:e})}]}(),L=Object(u.a)(A,2),D=L[0],R=L[1],M=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].sortOrder,n=t[1];return[a,function(e){n({type:"SET_SORT_ORDER",payload:e})}]}(),x=Object(u.a)(M,2),I=x[0],P=x[1],F=ae(),U=Object(u.a)(F,2),V=U[0],H=U[1],B=H.addToCollection,G=H.removeFromCollection,z=function(e){var t=e.tags,a=e.term,c=e.categories,r=e.columns,l=e.departments,o=W(),i=Object(u.a)(o,1)[0].datasets,s=k()({data:i,options:{shouldSort:!0,findAllMatches:!0,includeMatches:!0,tokenize:!0,keys:["resource.name","resource.description"],caseSensitive:!1}}),m=s.result,d=s.search;return Object(n.useEffect)((function(){d(a.toLocaleLowerCase())}),[d,a]),Object(n.useMemo)((function(){if(m){var e=m[0]&&m[0].item?m.map((function(e){return e.item})):Object(T.a)(m),a=m&&m[0]&&m[0].item?m.map((function(e){return{id:e.item.resource.id,matches:e.matches}})):[];return t&&t.length>0&&(e=e.filter((function(e){return e.classification.domain_tags.filter((function(e){return t.includes(e)})).length>0}))),c&&c.length>0&&(e=e.filter((function(e){return e.classification.categories.filter((function(e){return c.includes(e)})).length>0}))),r&&r.length>0&&(e=e.filter((function(e){return e.resource.columns_name&&e.resource.columns_name.filter((function(e){return r.includes(e)})).length>0}))),l&&l.length>0&&(e=e.filter((function(e){var t;return l.includes(null===(t=e.classification.domain_metadata.find((function(e){return"Dataset-Information_Agency"===e.key})))||void 0===t?void 0:t.value)}))),{datasets:e,matches:a.filter((function(t){return e.find((function(e){return e.resource.id===t.id}))}))}}return i}),[m,t,c,r,l,i])}({tags:s,categories:b,columns:E,term:_,departments:j}).datasets,q=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].collapseFilters,n=t[1];return[a,function(e){n({type:"SET_COLLAPSE_FILTER_BAR",payload:e})}]}(),J=Object(u.a)(q,2),Z=J[0],K=J[1],$=function(){var e=Ue(),t=Object(u.a)(e,2),a=t[0].collapsedFilterList,n=t[1];return[a,function(e,t){n({type:"SET_FILTER_STATE",payload:{filter:e,state:t}})}]}(),Q=Object(u.a)($,2),X=Q[0],ee=Q[1],te=De(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object(n.useMemo)((function(){return c?e:e.sort((function(e,n){var c=null,r=null;switch(t){case"Name":c=e.resource.name,r=n.resource.name;break;case"Created At":c=e.resource.createdAt,r=n.resource.createdAt;break;case"Updated At":c=e.resource.updatedAt,r=n.resource.updatedAt;break;case"Downloads":c=e.resource.download_count,r=n.resource.download_count;break;case"Views":c=e.resource.page_views.page_views_total,r=n.resource.page_views.page_views_total}return(c<r?1:-1)*(a?1:-1)}))}),[c,e,t,a])}(z,D,"asc"===I,_),5),ne=Object(u.a)(te,2),ce=ne[0],re=ne[1].pageButtons;return c.a.createElement("div",{className:"home-page"},c.a.createElement("div",{className:"filters ".concat(Z?"collapsed":"")},Z?c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,c.a.createElement("button",{onKeyDown:function(){return K(!1)},onClick:function(){return K(!1)},className:"header-button",type:"button"},"Filters",c.a.createElement(oe.a,{icon:ie.a})))):c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"filter-header"},c.a.createElement("button",{onKeyDown:function(){return K(!0)},onClick:function(){return K(!0)},className:"header-button",type:"button"},"Filters ",c.a.createElement(oe.a,{icon:ie.b}))),c.a.createElement("div",{className:"filters-scroll-area"},c.a.createElement("div",{className:"categories"},c.a.createElement(xe,{items:e,onChange:g,selected:b,collapse:X.categories,onCollapse:function(e){return ee("categories",e)},title:"Categories"})),c.a.createElement("div",{className:"departments"},c.a.createElement(xe,{items:a,selected:j,onChange:C,collapse:X.departments,onCollapse:function(e){return ee("departments",e)},title:"Departments"})),c.a.createElement("div",{className:"columns"},c.a.createElement(xe,{items:r,selected:E,onChange:p,collapse:X.columns,onCollapse:function(e){return ee("columns",e)},title:"Columns"})),c.a.createElement("div",{className:"tags"},c.a.createElement(xe,{items:t,selected:s,onChange:m,collapse:X.tags,onCollapse:function(e){return ee("tags",e)},title:"Tags"}))))),c.a.createElement("div",{className:"datasets"},c.a.createElement("div",{className:"search"},c.a.createElement(oe.a,{size:"lg",icon:ie.f}),c.a.createElement(le.DebounceInput,{type:"text",onChange:function(e){return S(e.target.value)},value:_,debounceTimeout:300,placeholder:"Search for dataset"})),c.a.createElement("div",{className:"count-and-sort"},c.a.createElement("p",null,c.a.createElement("span",{className:"bold"},z.length)," datasets"," ",_?"sorted by relevance":""),_?null:c.a.createElement(ke,{options:["Name","Created At","Updated At","Downloads","Views"],onDirection:function(e){return P(e)},selected:D,direction:I,onSelected:function(e){return R(e)}})),c.a.createElement("ul",{className:"dataset-list"},l?ce.map((function(e){var t;return c.a.createElement(_e,{key:null===e||void 0===e?void 0:null===(t=e.resource)||void 0===t?void 0:t.id,dataset:e,inCollection:V.datasets.includes(e.resource.id),onAddToCollection:function(e){return B(V.id,e)},onRemoveFromCollection:function(e){return G(V.id,e)},query:_})})):c.a.createElement(Se,null)),c.a.createElement("div",null,re)))}var He=a(45),Be=a.n(He),We=(a(84),a(46));a(85);function Ye(e){var t=e.rightDataset,a=e.matches,r=Object(n.useState)(!0),l=Object(u.a)(r,2),i=l[0],s=l[1],m=ae(),d=Object(u.a)(m,2),f=d[0],E=d[1],p=E.addToCollection,v=E.removeFromCollection;return c.a.createElement("div",{className:"join-column"},c.a.createElement("div",{className:"join-column-row"},c.a.createElement("span",{onClick:function(){return s(!i)},onKeyDown:function(e){32===e.keycode&&s(!i)},className:"join-column-name",role:"button",tabIndex:"0"},c.a.createElement(oe.a,{icon:i?ie.c:ie.a}),c.a.createElement(oe.a,{icon:We.a}),t.resource.name),c.a.createElement("span",null,a?"~ ".concat(Math.floor(100*a.matches.length/a.leftSize).toLocaleString()," % ids match"):"loading"),c.a.createElement("span",null,c.a.createElement(o.Link,{to:"/dataset/".concat(t.resource.id)},"View")),c.a.createElement("button",{type:"button",onClick:function(){return f.datasets.includes(t.resource.id)?v(f.id,t.resource.id):p(f.id,t.resource.id)}},f.datasets.includes(t.resource.id)?"Remove from collection":"Add to collection")),!i&&(a?c.a.createElement("div",{className:"join-column-unique"},c.a.createElement("h3",null,"COMMON IDS"),c.a.createElement("ul",null,a.matches.slice(0,10).map((function(e){return c.a.createElement("li",{key:e},c.a.createElement("div",{className:"bar"}),c.a.createElement(oe.a,{icon:ie.i}),c.a.createElement("span",null,e))}))),c.a.createElement("div",null,"and"," ",a.matches.length-Math.min(10,a.matches.slice(0,10).length)," ","more")):c.a.createElement("h2",null,"Loading")))}a(86);function Ge(e){var t=e.column,a=e.joins,r=e.dataset,l=Object(n.useState)(!0),o=Object(u.a)(l,2),i=o[0],s=o[1],m=Object(n.useState)([]),d=Object(u.a)(m,2),f=d[0],E=d[1],p=r.resource.columns_datatype[r.resource.columns_name.indexOf(t)],v=De(f?f.sort((function(e,t){return e.matches.length<t.matches.length?1:-1})).map((function(e){return a.find((function(t){return t.dataset.resource.id===e.id}))})):a,10),h=Object(u.a)(v,2),b=h[0],g=h[1].pageButtons;return Object(n.useEffect)((function(){!1===i&&0===f.length&&a.length>0&&F(r,t).then((function(e){a.forEach((function(a){return F(a.dataset,t).then((function(t){return E((function(n){return[].concat(Object(T.a)(n),[{id:a.dataset.resource.id,matches:e.filter((function(e){return t.includes(e)})),leftSize:e.length}])}))})).catch((function(){E((function(e){return[].concat(Object(T.a)(e),[{id:a.dataset.resource.id,matches:0,error:"failed to fetch"}])}))}))}))}))}),[t,r,a,i,f]),c.a.createElement("div",{className:"column-suggestions ".concat(i?"collapsed":"")},c.a.createElement("div",{className:"table-row",role:"button",onKeyDown:function(e){36===e.keyCode&&s(!i)},onClick:function(){return s(!i)},tabIndex:"0"},c.a.createElement("span",{className:"column-collapse"},c.a.createElement(oe.a,{icon:i?ie.c:ie.a})," ",t),c.a.createElement("span",null,p),c.a.createElement("span",null,a.length," datasets")),!i&&b&&c.a.createElement("div",{className:"columns-suggestions-matches"},c.a.createElement("h3",null,"MATCHING DATASETS"),a&&f&&c.a.createElement("ul",null,b.map((function(e){return c.a.createElement("li",{key:e.dataset.resource.id},c.a.createElement(Ye,{leftDataset:r,rightDataset:e.dataset,joinCol:t,matches:f.find((function(t){return t.id===e.dataset.resource.id}))}))}))),g))}function ze(e){var t,a=e.dataset,r=e.joinColumns,l=(null===a||void 0===a?void 0:null===(t=a.resource)||void 0===t?void 0:t.columns_name)||[],o=Object(n.useCallback)((function(e,t){return l?t.filter((function(t){return t.joinableColumns.includes(e.toLowerCase())})):[]}),[l]),i=Object(n.useMemo)((function(){return r?l.sort((function(e,t){return o(e,r).length<o(t,r).length?1:-1})):[]}),[l,r,o]);return c.a.createElement("div",{className:"column-match-table"},c.a.createElement("div",{className:"table-header"},c.a.createElement("ul",{className:"table-row"},c.a.createElement("li",null,"Column name"),c.a.createElement("li",null,"Column type"),c.a.createElement("li",null,"# Potential joins"))),a?i.map((function(e){return c.a.createElement(Ge,{dataset:a,column:e,joins:o(e,r)})})):Object(T.a)(Array(6)).map((function(e,t){return c.a.createElement("div",{key:t,className:"column-suggestions collapsed"},c.a.createElement("div",{className:"table-row",role:"button",tabIndex:"0"},c.a.createElement("span",{className:"column-collapse"},c.a.createElement(oe.a,{icon:ie.c})," ..."),c.a.createElement("span",{className:"animate"}," "),c.a.createElement("span",{className:"animate"}," ")))})))}a(87);var qe=function(e){var t=e.currentPage;return c.a.createElement("div",{className:"Breadcrumb"},c.a.createElement(o.Link,{to:"/"},"Home"),c.a.createElement("span",null," / ",t))},Je=(a(88),function(e){return Be()(e).format("MMMM DD, YYYY")});function Ze(e){var t,a,r,l,o,i=e.match;Re();var s=i.params.datasetID,m=q(s),d=q(m?m.resource.parent_fxf:null),f=G(m),E=Object(n.useState)("joins"),p=Object(u.a)(E,2),v=p[0],h=p[1],b=null===m||void 0===m?void 0:m.resource,g=null===b||void 0===b?void 0:b.page_views,O=null===m||void 0===m?void 0:m.classification,y=null===O||void 0===O?void 0:O.domain_metadata,j=z(s);Object(n.useEffect)((function(){var e="".concat(window.location.pathname,"/").concat(v);window.fathom("trackPageview",{path:e})}),[v]),Object(n.useEffect)((function(){window.fathom("trackPageview",{path:"/about"})}),[]);var C=j.filter((function(e){return e.dataset&&e.dataset.resource.id!==s})).slice(0,10),N=ae(),w=Object(u.a)(N,2),T=w[0],_=w[1],k=_.addToCollection,S=_.removeFromCollection,A=null===y||void 0===y?void 0:null===(t=y.find((function(e){var t=e.key,a=e.value;return"Update_Automation"===t&&"No"===a})))||void 0===t?void 0:t.value,L=null===y||void 0===y?void 0:null===(a=y.find((function(e){return"Update_Update-Frequency"===e.key})))||void 0===a?void 0:a.value,D=null===y||void 0===y?void 0:null===(r=y.find((function(e){return"Dataset-Information_Agency"===e.key})))||void 0===r?void 0:r.value;return c.a.createElement("div",{className:"dataset-page",key:b?b.id:"unknown"},c.a.createElement("div",{className:"dataset-details"},c.a.createElement("section",null,c.a.createElement(qe,{currentPage:b?b.name:"..."})),c.a.createElement("section",null,c.a.createElement("h2",{className:b?"":"animate"},null===b||void 0===b?void 0:b.name),c.a.createElement("p",{className:b?"":"animate"},D),c.a.createElement(me,{className:b?"":"animate",html:null===b||void 0===b?void 0:b.description}),c.a.createElement("button",{type:"button",className:"collection-button",disabled:!b,onClick:function(){return T.datasets.includes(s)?S(T.id,s):k(T.id,s)}},T.datasets.includes(s)?"Remove From Collection":"Add to Collection"," ")),c.a.createElement("section",{className:"external-link"},c.a.createElement("p",null,"Powered by"),c.a.createElement("img",{alt:"NYC Open Data",src:"https://opendata.cityofnewyork.us/wp-content/themes/opendata-wp/assets/img/nyc-open-data-logo.svg"}),c.a.createElement(Te,{permalink:m?null===m||void 0===m?void 0:m.permalink:"#"})),c.a.createElement("section",{className:"metadata"},c.a.createElement("h2",null,"Metadata"),c.a.createElement("h3",null,"Update Automation"),c.a.createElement("p",null,A),c.a.createElement("h3",null,"Update Frequency"),c.a.createElement("p",null,L),c.a.createElement("h3",null,"Dataset Owner"),c.a.createElement("p",null,null===m||void 0===m?void 0:null===(l=m.owner)||void 0===l?void 0:l.display_name),D&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Agency"),c.a.createElement("p",null,D)),(null===O||void 0===O?void 0:O.domain_category)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Category"),c.a.createElement("p",null,O.domain_category)),c.a.createElement("h3",null,"Updated"),c.a.createElement("p",null,Je(null===b||void 0===b?void 0:b.updatedAt)),c.a.createElement("h3",null,"Metadata Updated at"),c.a.createElement("p",null,Je(null===b||void 0===b?void 0:b.metadata_updated_at)),c.a.createElement("h3",null,"Page Views"),c.a.createElement("p",null,null===g||void 0===g?void 0:g.page_views_total))),c.a.createElement("div",{className:"dataset-recomendataions"},c.a.createElement("h2",null,"Other datasets to consider"),c.a.createElement("div",{className:"tabs"},c.a.createElement("button",{type:"button",className:"joins"===v?"active":"",onClick:function(){return h("joins")}},"Potential Join Columns"),c.a.createElement("button",{type:"button",className:"theme"===v?"active":"",onClick:function(){return h("theme")}},"Thematically Similar")),"joins"===v&&(!m||(null===m||void 0===m?void 0:null===(o=m.resource)||void 0===o?void 0:o.columns_field_name.length)>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"intro"},"Find datasets that share a column with the current dataset.")," ",c.a.createElement("p",null," ","These columns might be interesting datasets to join with the current dataset to add additional details or bring in context"),c.a.createElement(ze,{dataset:m,joinColumns:f})):function(e,t){var a,n,r;return t?c.a.createElement("p",{className:"intro"},"This dataset is actually a view of dataset"," ",null===t||void 0===t?void 0:null===(r=t.resource)||void 0===r?void 0:r.name):"file"===(null===e||void 0===e?void 0:null===(a=e.resource)||void 0===a?void 0:a.type)?c.a.createElement("p",{className:"intro"},"This resource points of a file which we currently don't have the ability to analyse. We are working to bring more types of data to Scout. Check back shortly"):"href"===(null===e||void 0===e?void 0:null===(n=e.resource)||void 0===n?void 0:n.type)?c.a.createElement("p",{className:"intro"},"This resource is actually just a link to a website resource. We currently dont have the ability to provide information on such resources"):c.a.createElement("p",{className:"intro"},"We currently dont have the ability to analyse this dataset.")}(m,d)),"theme"===v&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Dataset that are thematically similar based on name and description"),c.a.createElement("div",{className:"dataset-recomendataions-theme-list"},null===C||void 0===C?void 0:C.map((function(e){return c.a.createElement(_e,{onAddToCollection:function(){return k(T.id,e.dataset.resource.id)},onRemoveFromCollection:function(){return S(T.id,e.dataset.resource.id)},dataset:e.dataset,similarity:e.similarity,inCollection:T.datasets.includes(e.dataset.resource.id)})}))))))}a(89);var Ke=a(101),$e=a(102),Qe=a(103),Xe=a(104),et=a(105),tt=a(106),at=function(e){var t;return R.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!navigator.clipboard){a.next=9;break}return a.prev=1,a.next=4,R.a.awrap(navigator.clipboard.writeText(e));case 4:return a.abrupt("return",!0);case 7:a.prev=7,a.t0=a.catch(1);case 9:if(!document.queryCommandSupported||!document.queryCommandSupported("copy")){a.next=26;break}return(t=document.createElement("textarea")).style.opacity="0",t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select(),a.prev=16,a.abrupt("return",document.execCommand("copy"));case 20:return a.prev=20,a.t1=a.catch(16),a.abrupt("return",!1);case 23:return a.prev=23,document.body.removeChild(t),a.finish(23);case 26:return a.abrupt("return",!1);case 27:case"end":return a.stop()}}),null,null,[[1,7],[16,20,23,26]])};function nt(e){var t=e.match;Re();var a=t.params,r=a.name,l=a.datasetIDs,o=window.location.href,i=J(l.split(",")),s=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],r=a[1];return[c,function(){return R.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.awrap(at(e));case 2:r(!0);case 3:case"end":return t.stop()}}))}]}(o),m=Object(u.a)(s,2),d=m[0],f=m[1];return c.a.createElement("div",{className:"collection-page"},c.a.createElement("div",{className:"collection-details"},c.a.createElement("section",null,c.a.createElement(qe,{currentPage:"Collections"})),c.a.createElement("section",null,c.a.createElement("h2",null,r),c.a.createElement("p",null,i.length," dataset",i.length>1?"s":"")),c.a.createElement("div",null,c.a.createElement("h3",null,"Share this collection:"),c.a.createElement("p",{className:"dataset-url"},o," "),c.a.createElement("button",{type:"button",onClick:f},"Copy link"),c.a.createElement("span",null,d?"Copied!":" "," "),c.a.createElement("p",{className:"share-icons"},c.a.createElement(Ke.a,{url:o},c.a.createElement($e.a,{size:36}))," ",c.a.createElement(Qe.a,{url:o},c.a.createElement(Xe.a,{size:36})),c.a.createElement(et.a,{url:o},c.a.createElement(tt.a,{size:36}))))),c.a.createElement("div",{className:"collection-content"},i.map((function(e){return c.a.createElement(_e,{viewInOpenPortal:!0,key:e.id,dataset:e})}))))}a(93);var ct=a(24);function rt(){return Re("/about"),c.a.createElement("div",{className:"about-page"},c.a.createElement("section",{className:"about-dark-header"},c.a.createElement("div",{className:"about-header-full"},c.a.createElement("h3",null,"Introducing scout"),c.a.createElement("h2",null,"Uncover the city's data.")),c.a.createElement("div",{className:"content"},c.a.createElement("div",null,c.a.createElement("p",null,"We built scout to make data more accessible.")),c.a.createElement("div",null,c.a.createElement("p",null,"scout is a new way to browse New York's open data portal. It focuses on data discoverability, joinability and creating curated collections of datasets that deal with a specific subject."),c.a.createElement("p",null,"By focusing not on agencies, or departments, scout allows you to quickly identify datasets that are related to each other and can even potentially be joined together using a common ID. Having found these collections of datasets, scout makes it easy to share your findings with others through our data collections.")))),c.a.createElement("section",{className:"about-section-two-up"},c.a.createElement("div",{className:"center"},c.a.createElement("img",{src:"".concat("/scout","/circles.png"),alt:""})),c.a.createElement("div",null,c.a.createElement("h3",null,"Lots of datasets are lonely"),c.a.createElement("p",null,"While many open data sets are downloaded and viewed daily, there are many more that get far less attention. We think there is a lot of untapped potential in these datasets, especially when combined with some of the better known ones."),c.a.createElement("p",null,"Our goal is to make sure that when you search for a dataset, you are exposed to every other dataset that might also be relevant."))),c.a.createElement("section",{className:"about-section-two-up dark"},c.a.createElement("div",null,c.a.createElement("h3",null,"What is Data Clinic?"),c.a.createElement("p",null,"As the data and tech philanthropic arm of Two Sigma, Data Clinic provides pro bono data science and engineering support to nonprofits and engages in open source tooling and research that contribute to the Data for Good movement."),c.a.createElement("p",null," ","We leverage Two Sigma\u2019s people, data science skills, and technological know-how to support communities, mission driven organizations, and the broader public in their effort to use data more effectively."),c.a.createElement("p",null," ","To learn more visit"," ",c.a.createElement("a",{href:"dataclinic.twosigma.com",rel:"noopener noreferrer",target:"_blank"},"dataclinic.twosigma.com")," ","and connect with us via"," ",c.a.createElement("a",{href:"mailto:dataclinic@twosigma.com"},"dataclinic@twosigma.com"),".")),c.a.createElement("div",{className:"center"},c.a.createElement(w,null))),c.a.createElement("section",{className:"about-section-two-up teal"},c.a.createElement("div",{className:"social"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"https://github.com/tsdataclinic/scout",rel:"noopener noreferrer",target:"_blank"},c.a.createElement(oe.a,{icon:ct.a}))),c.a.createElement("li",null,c.a.createElement("a",{href:"https://medium.com/dataclinic",rel:"noopener noreferrer",target:"_blank"},c.a.createElement(oe.a,{icon:ct.b}))),c.a.createElement("li",null,c.a.createElement("a",{href:"https://twitter.com/tsdataclinic",rel:"noopener noreferrer",target:"_blank"},c.a.createElement(oe.a,{icon:ct.c}))))),c.a.createElement("div",null,c.a.createElement("h3",null,"How can I contribute?"),c.a.createElement("p",null,"We want scout to grow to help support the needs of the open data community. That means that we need a lot of voices helping us shape the features we are developing. If you would like to suggest a feature, please either open a ticket on github or reach out to us on one of our social media channels."),c.a.createElement("p",null,"If you are a developer, designer or want to contribute in a technical capacity we would love your help! Head over to our github page to open issues, suggest features, contribute pull requests and find beginner issues."))))}a(94);function lt(e){var t=e.collection;return c.a.createElement("div",{className:"collection-card"},c.a.createElement("p",{className:"created-at"},"Collection created ",de(t.createdAt)),c.a.createElement("h3",null,t.name),c.a.createElement("div",{className:"collection-stats"},c.a.createElement("span",null,"Datasets: ",t.datasets.length)))}a(95);function ot(){Re();var e=ne(),t=Object(u.a)(e,1)[0].collections.filter((function(e){return"pending"!==e.id}));return c.a.createElement("div",{className:"collections-page"},c.a.createElement("div",{className:"collections-header"},c.a.createElement("h2",null,"My Collections"),c.a.createElement("p",null,t.length," Collections")),0==t.length&&c.a.createElement("div",{className:"no-collections"},c.a.createElement("div",{className:"collection-icon"},c.a.createElement(oe.a,{icon:ie.e})),c.a.createElement("h3",null,"No Collections found"),c.a.createElement("p",null,"Select 'Add to Collection' on datasets to begin creating local connections"),c.a.createElement("div",{className:"what-are-collections"},c.a.createElement("h3",null,"What are Collections?"),c.a.createElement("p",null,"Collections allow you to group, save and share similar datasets. Collections are saved locally - to share your Collection use the share url. If a dataset updates on the open data portal, it will also update within your collection"))),t.length>0&&c.a.createElement("div",{className:"collections-list"},c.a.createElement("ul",null,t.map((function(e){return c.a.createElement("li",null,c.a.createElement(o.Link,{to:Ee(e)},c.a.createElement(lt,{collection:e})))})))))}a(96);function it(){var e=ae(),t=Object(u.a)(e,2),a=t[0],n=t[1],r=n.clearCollection,l=n.setName,i=J(a.datasets);return c.a.createElement("div",{className:"create-collection-modal"},c.a.createElement("h3",null,"Create collection with the following datasets"),c.a.createElement("ul",null,i.map((function(e){return c.a.createElement("li",null,e.resource.name)}))),c.a.createElement("input",{type:"text",placeholder:"Name",value:a.name,onChange:function(e){return l(e.target.value)}}),c.a.createElement(o.Link,{to:"/collection/".concat(a.name,"/").concat(a.datasets.join(","))},c.a.createElement("button",{type:"submit",onClick:r},"Create")))}a(97);function st(){var e=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),l=Object(u.a)(r,2),o=l[0],i=l[1];return Object(n.useEffect)((function(){c(window.localStorage.getItem("seenWelcome")),i(!0)}),[]),[a,o,function(){c(!0),window.localStorage.setItem("seenWelcome",!0)}]}(),t=Object(u.a)(e,3),a=t[0],r=t[1],l=t[2];return!a&&r&&c.a.createElement(s.Modal,{onBackdropClick:function(){l()}},c.a.createElement("div",{className:"welcome-modal"},c.a.createElement("h2",null,"Welcome to Scout!"),c.a.createElement("p",null,"Thanks for trying Scout. Scout is a new way to browse open data portals. It is built with discoverability in mind. To learn more, click the about button. To get started, try searching for a dataset or select a dataset to see recomendations."),c.a.createElement("p",null,"You can also create collections of datasets which you can share with others. To do so start collecting or click on the collections tab")))}function ut(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=sessionStorage.redirect;if(delete sessionStorage.redirect,e&&e!==window.location.href){var t=e;t="/".concat(t.split("/").slice(4).join("/")),r(t)}}),[]),a?c.a.createElement(i.c,{to:a}):c.a.createElement(c.a.Fragment,null)}a(98);var mt=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(o.BrowserRouter,{basename:"/scout"},c.a.createElement(s.ModalContainer,null),c.a.createElement(re,null),c.a.createElement("div",{className:"content"},c.a.createElement(i.g,null,c.a.createElement(i.d,{path:"/dataset/:datasetID",component:Ze}),c.a.createElement(i.d,{path:"/collection/:name/:datasetIDs",component:nt}),c.a.createElement(i.d,{path:"/about",component:rt}),c.a.createElement(i.d,{path:"/collections",component:ot}),c.a.createElement(s.ModalRoute,{path:"/collection/new",parentPath:"/",component:it}),c.a.createElement(i.d,{path:"/",component:Ve}),c.a.createElement(i.c,{from:"/",to:"/"}))),c.a.createElement(ut,null),c.a.createElement(st,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement((function(e){var t=e.children,a=Object(n.useReducer)(B,H),r=Object(u.a)(a,2),l=r[0],o=r[1];Object(n.useEffect)((function(){console.log("state is ",l)}),[l]),Object(n.useEffect)((function(){U.SocrataCache.get(1).then((function(e){if(e){var t=JSON.parse(e.data);o({type:"HYDRATE_STATE",payload:Object(S.a)({},H,{},t,{cache_loaded:!0})}),o({type:"SET_LOADED"})}else(function(){var e,t,a;return R.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R.a.awrap(x(0,1));case 2:return e=n.sent,t=e.resultSetSize,a=Math.ceil(t/100),n.abrupt("return",Promise.all(Object(T.a)(Array(a)).map((function(e,t){return x(t).then((function(e){return e.results}))}))).then((function(e){return e.reduce((function(e,t){return[].concat(Object(T.a)(t),Object(T.a)(e))}),[])})));case 6:case"end":return n.stop()}}))})().then((function(e){var t=function(e){var t={};return e.forEach((function(e){e.classification.domain_tags&&e.classification.domain_tags.forEach((function(e){e in t?t[e]+=1:t[e]=1}))})),t}(e),a=function(e){return e.reduce((function(e,t){return[].concat(Object(T.a)(e),Object(T.a)(t.classification.categories?t.classification.categories:[]))}),[]).reduce((function(e,t){return t in e?Object(S.a)({},e,Object(L.a)({},t,e[t]+1)):Object(S.a)({},e,Object(L.a)({},t,1))}),{})}(e),n=function(e){return e.map((function(e){return e.classification.domain_metadata.find((function(e){return"Dataset-Information_Agency"===e.key}))})).filter((function(e){return e})).map((function(e){return e.value})).reduce((function(e,t){return t in e?Object(S.a)({},e,Object(L.a)({},t,e[t]+1)):Object(S.a)({},e,Object(L.a)({},t,1))}),{})}(e),c=function(e){var t={};return e.forEach((function(e){e.resource.columns_name&&e.resource.columns_name.forEach((function(e){e in t?t[e]+=1:t[e]=1}))})),t}(e);o({type:"UPDATE_OPEN_DATASET_MANIFEST",payload:e}),o({type:"UPDATE_TAGS",payload:t}),o({type:"UPDATE_CATEGORIES",payload:a}),o({type:"UPDATE_DEPARTMENTS",payload:n}),o({type:"UPDATE_COLUMNS",payload:c}),o({type:"SET_LOADED"})}))}))}),[]);var i=l.datasets,s=l.tagList,m=l.columns,d=l.categories,f=l.departments,E=l.stateLoaded;return Object(n.useEffect)((function(){E&&(console.log("writing cache"),U.SocrataCache.put({data:JSON.stringify({datasets:i,tagList:s,categories:d,departments:f,columns:m}),id:1}))}),[i,s,d,m,f,E]),c.a.createElement(V.Provider,{value:[l,o]},t)}),null,c.a.createElement((function(e){var t=e.children,a=Object(n.useReducer)(Fe,Pe),r=Object(u.a)(a,2),l=r[0],o=r[1];return c.a.createElement(Ie.Provider,{value:[l,o]},t)}),null,c.a.createElement((function(e){var t=e.children,a=Object(n.useReducer)(ee,Q),r=Object(u.a)(a,2),l=r[0],o=r[1],i=l.cacheLoaded,s=l.collections,m=l.activeCollectionID;return Object(n.useEffect)((function(){X.CollectionCache.get(1).then((function(e){if(e){var t=JSON.parse(e.data);o({type:"HYDRATE_STATE",payload:Object(S.a)({},Q,{},t,{cacheLoaded:!0})})}else o({payload:Object(S.a)({},Q,{cacheLoaded:!0}),type:"HYDRATE_STATE"})}))}),[]),Object(n.useEffect)((function(){i&&X.CollectionCache.put({data:JSON.stringify({collections:s,activeCollectionID:m}),id:1})}),[i,s,m]),c.a.createElement($.Provider,{value:[l,o]},t)}),null,c.a.createElement(mt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[48,1,2]]]);
//# sourceMappingURL=main.4758979e.chunk.js.map